{"ast":null,"code":"var _jsxFileName = \"D:\\\\it_inventory.localhost\\\\frontend\\\\src\\\\components\\\\AssetList.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/AssetList.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom'; // Импортируем useLocation\nimport { Container, Typography, Box, TextField, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Alert, Snackbar, TablePagination, TableSortLabel, Checkbox, MenuItem, Menu, IconButton, CircularProgress } from '@mui/material';\nimport AddIcon from '@mui/icons-material/Add';\nimport CloseIcon from '@mui/icons-material/Close';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config'; // Импорт базового URL\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AssetList = ({\n  currentUser\n}) => {\n  _s();\n  const [assets, setAssets] = useState([]);\n  const [filteredAssets, setFilteredAssets] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [types, setTypes] = useState([]); // Для отображения имени типа\n  const [statuses, setStatuses] = useState([]);\n  const [departments, setDepartments] = useState([]);\n  const [employees, setEmployees] = useState([]);\n  const [selectedAssets, setSelectedAssets] = useState([]);\n  const [sortColumn, setSortColumn] = useState('inventory_number');\n  const [sortOrder, setSortOrder] = useState('asc');\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(50);\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    message: '',\n    severity: 'success'\n  });\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [assetsToDelete, setAssetsToDelete] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // <<<--- НОВОЕ: Состояния для управления дополнительными колонками\n  const [extraColumns, setExtraColumns] = useState([]); // Массив ключей дополнительных колонок\n  const [anchorEl, setAnchorEl] = useState(null); // Для управления меню\n  const openMenu = Boolean(anchorEl);\n\n  // <<<--- НОВОЕ: Состояние для диалога подтверждения навигации\n  const [navDialogOpen, setNavDialogOpen] = useState(false);\n  const [nextLocation, setNextLocation] = useState(null);\n  const [confirmedNavigation, setConfirmedNavigation] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation(); // Получаем текущую локацию\n\n  // <<<--- НОВОЕ: Функция для форматирования ФИО\n  const formatEmployeeName = useCallback(fullName => {\n    if (!fullName) return '';\n    const parts = fullName.trim().split(/\\s+/);\n    if (parts.length === 0) return '';\n    if (parts.length === 1) return parts[0];\n    return `${parts[0]} ${parts.slice(1).map(part => part.charAt(0).toUpperCase() + '.').join('')}`.trim();\n  }, []);\n\n  // <<<--- НОВОЕ: Обработчик beforeunload\n  const handleBeforeUnload = useCallback(event => {\n    if (selectedAssets.length > 0) {\n      event.preventDefault();\n      // Chrome требует установку returnValue\n      event.returnValue = '';\n      return '';\n    }\n  }, [selectedAssets]);\n\n  // <<<--- НОВОЕ: Эффект для установки/снятия beforeunload listener\n  useEffect(() => {\n    if (selectedAssets.length > 0) {\n      window.addEventListener('beforeunload', handleBeforeUnload);\n    } else {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    }\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [selectedAssets, handleBeforeUnload]);\n\n  // <<<--- НОВОЕ: Обработчик перехода (для Prompt или ручной навигации)\n  // Это упрощённая версия. Для полноценного Prompt из RRv6 нужно больше настройки.\n  const handleNavigationAttempt = useCallback(to => {\n    if (selectedAssets.length > 0 && !confirmedNavigation) {\n      // Предотвращаем автоматическую навигацию браузера\n      if (window.confirm(\"У вас есть выделенные активы. Вы уверены, что хотите покинуть страницу?\")) {\n        setConfirmedNavigation(true);\n        // Откладываем навигацию на следующий тик, чтобы сначала обновилось состояние\n        setTimeout(() => navigate(to), 0);\n      }\n      return false; // Предотвращаем немедленный переход\n    }\n    return true; // Разрешаем переход\n  }, [selectedAssets, confirmedNavigation, navigate]);\n\n  // Загрузка данных\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const [assetsRes, typesRes, statusesRes, departmentsRes, employeesRes] = await Promise.all([axios.get(`${API_BASE_URL}/api/assets`, {\n          withCredentials: true\n        }), axios.get(`${API_BASE_URL}/api/types`, {\n          withCredentials: true\n        }), axios.get(`${API_BASE_URL}/api/statuses`, {\n          withCredentials: true\n        }), axios.get(`${API_BASE_URL}/api/departments`, {\n          withCredentials: true\n        }), axios.get(`${API_BASE_URL}/api/employees`, {\n          withCredentials: true\n        })]);\n        setAssets(assetsRes.data);\n        setTypes(typesRes.data);\n        setStatuses(statusesRes.data);\n        setDepartments(departmentsRes.data);\n        setEmployees(employeesRes.data);\n        setFilteredAssets(assetsRes.data);\n      } catch (err) {\n        console.error('Ошибка загрузки данных:', err);\n        if (err.response && err.response.status === 401) {\n          setError('Ошибка аутентификации. Пожалуйста, войдите снова.');\n        } else {\n          setError('Ошибка загрузки данных. Пожалуйста, попробуйте позже.');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // Функции для получения имен по ID\n  const getTypeName = useCallback(typeId => {\n    const type = types.find(t => t.id === typeId);\n    return type ? type.name : '';\n  }, [types]); // Зависит только от types\n\n  const getStatusName = useCallback(statusId => {\n    const status = statuses.find(s => s.id === statusId);\n    return status ? status.name : '';\n  }, [statuses]); // Зависит только от statuses\n\n  const getDepartmentName = useCallback(deptId => {\n    const dept = departments.find(d => d.id === deptId);\n    return dept ? dept.name : '';\n  }, [departments]); // Зависит только от departments\n\n  const getEmployeeName = useCallback(empId => {\n    const emp = employees.find(e => e.id === empId);\n    // Используем форматирование ФИО\n    return emp ? formatEmployeeName(emp.name) : '';\n  }, [employees]); // Зависит только от employees\n\n  // Фильтрация и сортировка\n  useEffect(() => {\n    let result = assets;\n\n    // Поиск\n    if (searchTerm) {\n      const term = searchTerm.toLowerCase();\n      result = result.filter(asset => {\n        var _getTypeName, _asset$brand, _asset$model;\n        // Создаем составное \"Наименование\"\n        // Используем ?? '' для защиты от null/undefined в отдельных частях имени\n        const fullName = `${(_getTypeName = getTypeName(asset.type_id)) !== null && _getTypeName !== void 0 ? _getTypeName : ''} ${(_asset$brand = asset.brand) !== null && _asset$brand !== void 0 ? _asset$brand : ''} ${(_asset$model = asset.model) !== null && _asset$model !== void 0 ? _asset$model : ''}`.toLowerCase().trim();\n\n        // Базовые поля для поиска\n        const baseFieldsMatch = asset.inventory_number && asset.inventory_number.toLowerCase().includes(term) || fullName.includes(term) || asset.responsible_person && getEmployeeName(asset.responsible_person).toLowerCase().includes(term) ||\n        // Проверка на null перед вызовом getEmployeeName\n        asset.department_id && getDepartmentName(asset.department_id).toLowerCase().includes(term) ||\n        // Проверка на null\n        asset.room && asset.room.toLowerCase().includes(term);\n\n        // Дополнительные поля для поиска\n        let extraFieldsMatch = false;\n        if (extraColumns.length > 0) {\n          extraFieldsMatch = extraColumns.some(colKey => {\n            // Для всех полей сначала получаем значение, затем проверяем его тип и содержание\n            let fieldValue;\n\n            // Определяем значение поля в зависимости от colKey\n            switch (colKey) {\n              case 'serial_number':\n                fieldValue = asset.serial_number;\n                break;\n              case 'CPU':\n                fieldValue = asset.CPU;\n                break;\n              case 'RAM':\n                fieldValue = asset.RAM;\n                break;\n              case 'Drive':\n                fieldValue = asset.Drive;\n                break;\n              case 'OS':\n                fieldValue = asset.OS;\n                break;\n              // Убедитесь, что имя поля соответствует тому, как оно хранится в объекте asset\n              // Если в asset поле называется IP_address, используйте его\n              case 'IP_address':\n                fieldValue = asset.IP_address;\n                break;\n              case 'status_id':\n                fieldValue = asset.status_id ? getStatusName(asset.status_id) : '';\n                break;\n              case 'actual_user':\n                fieldValue = asset.actual_user ? formatEmployeeName(getEmployeeName(asset.actual_user)) : '';\n                break;\n              case 'purchase_date':\n                fieldValue = asset.purchase_date;\n                break;\n              case 'number':\n                fieldValue = asset.number;\n                break;\n              default:\n                fieldValue = null;\n            }\n\n            // Проверяем, что fieldValue существует и является строкой, прежде чем искать\n            if (fieldValue != null && typeof fieldValue === 'string') {\n              return fieldValue.toLowerCase().includes(term);\n            }\n            // Если fieldValue - это число (например, для RAM в ГБ), преобразуем его в строку\n            if (typeof fieldValue === 'number') {\n              return fieldValue.toString().includes(term); // Поиск подстроки в строковом представлении числа\n            }\n            // Для status_id мы уже получили строку через getStatusName, если ID был валидным\n            // Если getStatusName вернул null или не строку, это не совпадение\n\n            return false; // Если поле не подходит или не найдено совпадение\n          });\n        }\n        return baseFieldsMatch || extraFieldsMatch;\n      });\n    }\n\n    // Сортировка\n    // --- ИСПРАВЛЕНА СОРТИРОВКА ---\n    result = [...result].sort((a, b) => {\n      let aValue = a[sortColumn];\n      let bValue = b[sortColumn];\n\n      // --- Безопасное преобразование в строку и приведение null/undefined ---\n      // Это ключевое изменение: всегда обеспечиваем, что aValue и bValue - строки\n      const safeStringify = val => {\n        if (val == null) return ''; // Преобразуем null/undefined в пустую строку\n        // Для объектов Date используем их строковое представление\n        if (val instanceof Date) return val.toISOString();\n        // Для чисел и булевых значений преобразуем в строку\n        return String(val);\n      };\n\n      // --- Специальная обработка для определённых колонок ---\n      if (sortColumn === 'type_id') {\n        var _getTypeName2, _getStatusName;\n        aValue = (_getTypeName2 = getTypeName(aValue)) !== null && _getTypeName2 !== void 0 ? _getTypeName2 : ''; // Используем ?? для защиты\n        bValue = (_getStatusName = getStatusName(bValue)) !== null && _getStatusName !== void 0 ? _getStatusName : '';\n      } else if (sortColumn === 'status_id') {\n        var _getStatusName2, _getStatusName3;\n        aValue = (_getStatusName2 = getStatusName(aValue)) !== null && _getStatusName2 !== void 0 ? _getStatusName2 : '';\n        bValue = (_getStatusName3 = getStatusName(bValue)) !== null && _getStatusName3 !== void 0 ? _getStatusName3 : '';\n      } else if (sortColumn === 'department_id') {\n        var _getDepartmentName, _getDepartmentName2;\n        aValue = (_getDepartmentName = getDepartmentName(aValue)) !== null && _getDepartmentName !== void 0 ? _getDepartmentName : '';\n        bValue = (_getDepartmentName2 = getDepartmentName(bValue)) !== null && _getDepartmentName2 !== void 0 ? _getDepartmentName2 : '';\n      } else if (sortColumn === 'responsible_person') {\n        var _getEmployeeName, _getEmployeeName2;\n        aValue = (_getEmployeeName = getEmployeeName(aValue)) !== null && _getEmployeeName !== void 0 ? _getEmployeeName : '';\n        bValue = (_getEmployeeName2 = getEmployeeName(bValue)) !== null && _getEmployeeName2 !== void 0 ? _getEmployeeName2 : '';\n      } else if (sortColumn === 'purchase_date') {\n        // Преобразуем в Date для корректного сравнения, null -> старая дата\n        const dateA = aValue ? new Date(aValue) : new Date(0);\n        const dateB = bValue ? new Date(bValue) : new Date(0);\n        // Сравнение дат\n        if (dateA < dateB) return sortOrder === 'asc' ? -1 : 1;\n        if (dateA > dateB) return sortOrder === 'asc' ? 1 : -1;\n        return 0;\n      }\n      // Для всех остальных полей, включая 'OS', 'CPU', 'brand', 'model' и т.д.\n      // просто преобразуем значения в строки безопасным способом\n      else {\n        aValue = safeStringify(aValue);\n        bValue = safeStringify(bValue);\n      }\n\n      // --- Теперь aValue и bValue гарантированно строки. Сравниваем. ---\n      // Приводим к нижнему регистру для регистронезависимой сортировки\n      const aStr = aValue.toLowerCase();\n      const bStr = bValue.toLowerCase();\n\n      // Общее лексикографическое сравнение строк\n      if (aStr < bStr) {\n        return sortOrder === 'asc' ? -1 : 1;\n      }\n      if (aStr > bStr) {\n        return sortOrder === 'asc' ? 1 : -1;\n      }\n      return 0;\n    });\n    // --- КОНЕЦ ИСПРАВЛЕНОЙ СОРТИРОВКИ ---\n\n    setFilteredAssets(result);\n    setPage(0); // Сбросить на первую страницу после фильтрации/сортировки\n  }, [assets, searchTerm, sortColumn, sortOrder, types, statuses, departments, employees, extraColumns, getEmployeeName, getDepartmentName, getStatusName, getTypeName]);\n\n  // Сортировка\n  const handleSort = column => {\n    if (sortColumn === column) {\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortColumn(column);\n      setSortOrder('asc');\n    }\n  };\n\n  // Пагинация\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  // Выбор активов\n  const handleSelectAllClick = event => {\n    if (event.target.checked) {\n      const newSelected = paginatedAssets.map(asset => asset.id);\n      setSelectedAssets(newSelected);\n      return;\n    }\n    setSelectedAssets([]);\n  };\n  const handleClick = (event, id) => {\n    const selectedIndex = selectedAssets.indexOf(id);\n    let newSelected = [];\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selectedAssets, id);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selectedAssets.slice(1));\n    } else if (selectedIndex === selectedAssets.length - 1) {\n      newSelected = newSelected.concat(selectedAssets.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selectedAssets.slice(0, selectedIndex), selectedAssets.slice(selectedIndex + 1));\n    }\n    setSelectedAssets(newSelected);\n  };\n  const isSelected = id => selectedAssets.indexOf(id) !== -1;\n\n  // Пагинация\n  const paginatedAssets = filteredAssets.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage);\n  const isAllSelected = paginatedAssets.length > 0 && selectedAssets.length === paginatedAssets.length;\n\n  // <<<--- НОВОЕ: Логика для дополнительных колонок\n  const availableExtraColumns = [{\n    key: 'serial_number',\n    label: 'Серийный номер'\n  }, {\n    key: 'CPU',\n    label: 'Процессор'\n  }, {\n    key: 'RAM',\n    label: 'Оперативная память (ГБ)'\n  }, {\n    key: 'Drive',\n    label: 'Диск (HDD/SSD)'\n  }, {\n    key: 'OS',\n    label: 'Операционная система'\n  }, {\n    key: 'IP_address',\n    label: 'IP-адрес'\n  },\n  // Используем имя из JSON\n  {\n    key: 'status_id',\n    label: 'Статус'\n  }, {\n    key: 'actual_user',\n    label: 'Фактический пользователь'\n  }, {\n    key: 'purchase_date',\n    label: 'Дата покупки'\n  }, {\n    key: 'number',\n    label: 'Номер'\n  }];\n  const handleAddColumnClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleAddColumnClose = () => {\n    setAnchorEl(null);\n  };\n  const handleAddColumnSelect = columnKey => {\n    if (!extraColumns.includes(columnKey)) {\n      setExtraColumns([...extraColumns, columnKey]);\n    }\n    handleAddColumnClose();\n  };\n  const handleRemoveExtraColumn = columnKeyToRemove => {\n    setExtraColumns(extraColumns.filter(key => key !== columnKeyToRemove));\n  };\n\n  // Печать QR-кодов\n  const handlePrintQRCode = async () => {\n    if (selectedAssets.length === 0) {\n      setSnackbar({\n        open: true,\n        message: 'Выберите хотя бы один актив',\n        severity: 'warning'\n      });\n      return;\n    }\n    try {\n      const res = await axios.post(`${API_BASE_URL}/api/qrcodes`, {\n        ids: selectedAssets\n      }, {\n        withCredentials: true\n      });\n      const codes = res.data;\n      let htmlContent = `\n        <html>\n          <head>\n            <style>\n              @page {\n                size: A4;\n                margin: 0;\n              }\n\n              body {\n                width: 21cm;\n                padding: 0;\n                background-color: #fff;\n                font-family: Arial, sans-serif;\n              }\n\n              .page {\n                display: flex;\n                flex-wrap: wrap;\n                gap: 10px;\n                padding: 20px;\n                box-sizing: border-box;\n                page-break-after: always;\n                break-after: page;\n              }\n\n              .qr-wrapper {\n                width: 3cm;\n                height: 3cm;\n                position: relative;\n                text-align: center;\n                font-size: 10px;\n                box-sizing: border-box;\n                page-break-inside: avoid;\n                break-inside: avoid;\n              }\n\n              .qr-container {\n                width: 100%;\n                height: calc (100%);\n                display: flex;\n                justify-content: center;\n                align-items: center;\n              }\n\n              img {\n                max-width: 100%;\n                max-height: 100%;\n                object-fit: contain;\n              }\n\n              .text-top,\n              .text-bottom {\n                position: absolute;\n                left: 50%;\n                transform: translateX(-50%);\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                width: 90%;\n                font-size: 8px;\n              }\n\n              .text-top {\n                top: 0;\n              }\n\n              .text-bottom {\n                bottom: 0;\n              }\n            </style>\n          </head>\n          <body>\n      `;\n      const itemsPerPage = 48;\n      for (let i = 0; i < codes.length; i += itemsPerPage) {\n        const pageItems = codes.slice(i, i + itemsPerPage);\n        htmlContent += `<div class=\"page\">`;\n        pageItems.forEach(code => {\n          htmlContent += `\n            <div class=\"qr-wrapper\">\n              <div class=\"qr-container\">\n                <img src=\"data:image/png;base64,${code.qr_base64}\" />\n              </div>\n              <span class=\"text-top\">${code.full_name || ''}</span>\n              <span class=\"text-bottom\">${code.inventory_number || ''}</span>\n            </div>\n          `;\n        });\n        htmlContent += `</div>`;\n      }\n      htmlContent += '</body></html>';\n      const printWindow = window.open('', '_blank');\n      printWindow.document.write(htmlContent);\n      setTimeout(() => {\n        printWindow.print();\n        printWindow.close();\n      }, 500);\n    } catch (err) {\n      console.error('Ошибка при генерации QR-кодов:', err);\n      setSnackbar({\n        open: true,\n        message: 'Не удалось получить QR-коды с сервера',\n        severity: 'error'\n      });\n    }\n  };\n\n  // Экспорт в Excel\n  const handleExportExcel = () => {\n    if (selectedAssets.length === 0) {\n      setSnackbar({\n        open: true,\n        message: 'Выберите хотя бы один актив для экспорта',\n        severity: 'warning'\n      });\n      return;\n    }\n    const selectedAssetObjects = assets.filter(asset => selectedAssets.includes(asset.id));\n\n    // Подготавливаем данные для экспорта, включая все отображаемые колонки\n    const dataToExport = selectedAssetObjects.map(asset => {\n      const row = {\n        'Инвентарный номер': asset.inventory_number || '',\n        'Наименование': `${getTypeName(asset.type_id) || ''} ${asset.brand || ''} ${asset.model || ''}`.trim(),\n        'Ответственный': getEmployeeName(asset.responsible_person),\n        'Отдел': getDepartmentName(asset.department_id),\n        'Помещение': asset.room || ''\n      };\n\n      // Добавляем данные для дополнительных колонок\n      extraColumns.forEach(colKey => {\n        const columnDef = availableExtraColumns.find(col => col.key === colKey);\n        if (columnDef) {\n          if (colKey === 'status_id') {\n            row[columnDef.label] = getStatusName(asset.status_id);\n          } else if (colKey === 'purchase_date' && asset.purchase_date) {\n            row[columnDef.label] = new Date(asset.purchase_date).toLocaleDateString();\n          } else {\n            // Для остальных полей используем имя из JSON\n            row[columnDef.label] = asset[colKey] || '';\n          }\n        }\n      });\n      return row;\n    });\n\n    // Создаем CSV контент\n    const allHeaders = Object.keys(dataToExport[0]);\n    const headers = allHeaders.join(';') + '\\n';\n    const rows = dataToExport.map(obj => Object.values(obj).map(value => `\"${value}\"`).join(';')).join('\\n');\n    const csvContent = '\\uFEFF' + headers + rows; // BOM для UTF-8\n\n    const blob = new Blob([csvContent], {\n      type: 'text/csv;charset=utf-8;'\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.setAttribute('href', url);\n    link.setAttribute('download', `Оборудование_${new Date().toISOString().slice(0, 10)}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Удаление активов\n  const handleDeleteSelected = () => {\n    if (selectedAssets.length === 0) {\n      setSnackbar({\n        open: true,\n        message: 'Выберите активы для удаления',\n        severity: 'warning'\n      });\n      return;\n    }\n    setAssetsToDelete(selectedAssets);\n    setDeleteDialogOpen(true);\n  };\n  const confirmDelete = async () => {\n    try {\n      await Promise.all(assetsToDelete.map(id => axios.delete(`${API_BASE_URL}/api/assets/${id}`, {\n        withCredentials: true\n      })));\n      setAssets(assets.filter(asset => !assetsToDelete.includes(asset.id)));\n      setSelectedAssets([]); // Очищаем выбор\n      setAssetsToDelete([]); // Очищаем список на удаление\n      setSnackbar({\n        open: true,\n        message: 'Активы успешно удалены',\n        severity: 'success'\n      });\n    } catch (err) {\n      console.error('Ошибка при удалении активов:', err);\n      setSnackbar({\n        open: true,\n        message: 'Ошибка при удалении активов',\n        severity: 'error'\n      });\n    } finally {\n      setDeleteDialogOpen(false);\n    }\n  };\n  const closeDeleteDialog = () => {\n    setDeleteDialogOpen(false);\n    setAssetsToDelete([]);\n  };\n\n  // <<<--- НОВОЕ: Обработчики для диалога навигации\n  const handleNavDialogClose = (agree = false) => {\n    setNavDialogOpen(false);\n    if (agree && nextLocation) {\n      setConfirmedNavigation(true);\n      // Навигация на отложенную локацию\n      setTimeout(() => navigate(nextLocation), 0);\n    } else {\n      // Сброс состояния, если пользователь отменил\n      setNextLocation(null);\n    }\n  };\n\n  // <<<--- НОВОЕ: Эффект для сброса confirmedNavigation после навигации\n  useEffect(() => {\n    if (confirmedNavigation) {\n      setConfirmedNavigation(false);\n      setSelectedAssets([]); // Опционально: сбросить выбор после навигации\n    }\n  }, [location, confirmedNavigation]);\n\n  // Уведомления\n  const handleCloseSnackbar = () => {\n    setSnackbar({\n      ...snackbar,\n      open: false\n    });\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    style: {\n      marginTop: '20px',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 652,\n    columnNumber: 5\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    style: {\n      marginTop: '20px'\n    },\n    children: /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 658,\n    columnNumber: 5\n  }, this);\n\n  // <<<--- НОВОЕ: Определяем количество базовых колонок + 1 (для кнопки +)\n  const baseColumnCount = 5 + 1; // Инвентарный номер, Наименование, Ответственный, Отдел, Помещение, кнопка +\n  const totalColumnCount = baseColumnCount + extraColumns.length;\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"xl\",\n    style: {\n      marginTop: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      gutterBottom: true,\n      style: {\n        textAlign: 'center',\n        fontSize: '30px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\u041E\\u0431\\u043E\\u0440\\u0443\\u0434\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 670,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      label: \"\\u041F\\u043E\\u0438\\u0441\\u043A\",\n      variant: \"outlined\",\n      fullWidth: true,\n      value: searchTerm,\n      onChange: e => setSearchTerm(e.target.value),\n      style: {\n        marginBottom: '16px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 675,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      gap: 2,\n      mb: 2,\n      flexWrap: \"wrap\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: handleExportExcel,\n        disabled: selectedAssets.length === 0,\n        children: \"\\u041F\\u0435\\u0447\\u0430\\u0442\\u044C Excel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: handlePrintQRCode,\n        disabled: selectedAssets.length === 0,\n        children: \"\\u041F\\u0435\\u0447\\u0430\\u0442\\u044C QR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 9\n      }, this), currentUser && currentUser.role === 'admin' && /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"error\",\n        onClick: handleDeleteSelected,\n        disabled: selectedAssets.length === 0,\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 704,\n        columnNumber: 11\n      }, this), currentUser && currentUser.role === 'admin' && /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"success\",\n        onClick: () => {\n          if (selectedAssets.length > 0) {\n            if (window.confirm(\"У вас есть выделенные активы. Вы уверены, что хотите покинуть страницу?\")) {\n              setSelectedAssets([]); // Очищаем выбор перед навигацией\n              navigate('/assets/new');\n            }\n          } else {\n            navigate('/assets/new');\n          }\n        },\n        children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 714,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 686,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      align: \"left\",\n      gutterBottom: true,\n      children: [\"\\u0412\\u044B\\u0434\\u0435\\u043B\\u0435\\u043D\\u043E: \", selectedAssets.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 733,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n      component: Paper,\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              padding: \"checkbox\",\n              children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                indeterminate: selectedAssets.length > 0 && selectedAssets.length < paginatedAssets.length,\n                checked: isAllSelected,\n                onChange: handleSelectAllClick\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 743,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 742,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                fontWeight: 'bold'\n              },\n              children: /*#__PURE__*/_jsxDEV(TableSortLabel, {\n                active: sortColumn === 'inventory_number',\n                direction: sortColumn === 'inventory_number' ? sortOrder : 'asc',\n                onClick: () => handleSort('inventory_number'),\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"\\u0418\\u043D\\u0432\\u0435\\u043D\\u0442\\u0430\\u0440\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                fontWeight: 'bold'\n              },\n              children: /*#__PURE__*/_jsxDEV(TableSortLabel, {\n                active: sortColumn === 'type_id',\n                direction: sortColumn === 'type_id' ? sortOrder : 'asc',\n                onClick: () => handleSort('type_id'),\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 761,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 760,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                fontWeight: 'bold'\n              },\n              children: /*#__PURE__*/_jsxDEV(TableSortLabel, {\n                active: sortColumn === 'responsible_person',\n                direction: sortColumn === 'responsible_person' ? sortOrder : 'asc',\n                onClick: () => handleSort('responsible_person'),\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"\\u041E\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u044B\\u0439\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 771,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                fontWeight: 'bold'\n              },\n              children: /*#__PURE__*/_jsxDEV(TableSortLabel, {\n                active: sortColumn === 'department_id',\n                direction: sortColumn === 'department_id' ? sortOrder : 'asc',\n                onClick: () => handleSort('department_id'),\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"\\u041E\\u0442\\u0434\\u0435\\u043B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 781,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 780,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                fontWeight: 'bold'\n              },\n              children: /*#__PURE__*/_jsxDEV(TableSortLabel, {\n                active: sortColumn === 'room',\n                direction: sortColumn === 'room' ? sortOrder : 'asc',\n                onClick: () => handleSort('room'),\n                sx: {\n                  fontWeight: 'bold'\n                },\n                children: \"\\u041F\\u043E\\u043C\\u0435\\u0449\\u0435\\u043D\\u0438\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 791,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 790,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                fontWeight: 'bold',\n                width: '50px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                color: \"success\" // Зелёная кнопка\n                ,\n                onClick: handleAddColumnClick,\n                size: \"small\",\n                \"aria-label\": \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u043E\\u043B\\u043E\\u043D\\u043A\\u0443\",\n                children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 808,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 802,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Menu, {\n                anchorEl: anchorEl,\n                open: openMenu,\n                onClose: handleAddColumnClose,\n                anchorOrigin: {\n                  vertical: 'bottom',\n                  horizontal: 'center'\n                },\n                transformOrigin: {\n                  vertical: 'top',\n                  horizontal: 'center'\n                },\n                children: [availableExtraColumns.filter(col => !extraColumns.includes(col.key)) // Показываем только НЕдобавленные\n                .map(col => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  onClick: () => handleAddColumnSelect(col.key),\n                  children: col.label\n                }, col.key, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 827,\n                  columnNumber: 23\n                }, this)), availableExtraColumns.filter(col => !extraColumns.includes(col.key)).length === 0 && /*#__PURE__*/_jsxDEV(MenuItem, {\n                  disabled: true,\n                  children: \"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u043A\\u043E\\u043B\\u043E\\u043D\\u043E\\u043A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 832,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 811,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 801,\n              columnNumber: 15\n            }, this), extraColumns.map(colKey => {\n              const columnDef = availableExtraColumns.find(col => col.key === colKey);\n              return /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  fontWeight: 'bold',\n                  position: 'relative'\n                },\n                children: [/*#__PURE__*/_jsxDEV(TableSortLabel, {\n                  active: sortColumn === colKey,\n                  direction: sortColumn === colKey ? sortOrder : 'asc',\n                  onClick: () => handleSort(colKey),\n                  sx: {\n                    fontWeight: 'bold',\n                    paddingRight: '24px'\n                  } // Отступ для крестика\n                  ,\n                  children: columnDef ? columnDef.label : colKey\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 841,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                  size: \"small\",\n                  onClick: () => handleRemoveExtraColumn(colKey),\n                  sx: {\n                    position: 'absolute',\n                    top: '50%',\n                    right: 0,\n                    transform: 'translateY(-50%)',\n                    color: 'red',\n                    // Красный крестик\n                    opacity: 0,\n                    // Скрыто по умолчанию\n                    transition: 'opacity 0.2s',\n                    padding: '2px',\n                    '&:hover': {\n                      backgroundColor: 'rgba(255, 0, 0, 0.1)'\n                    }\n                  },\n                  className: \"remove-column-button\" // Для стилей наведения\n                  ,\n                  children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 868,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 850,\n                  columnNumber: 21\n                }, this)]\n              }, colKey, true, {\n                fileName: _jsxFileName,\n                lineNumber: 840,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 740,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          children: paginatedAssets.length > 0 ? paginatedAssets.map(asset => {\n            const isItemSelected = isSelected(asset.id);\n            return /*#__PURE__*/_jsxDEV(TableRow, {\n              hover: true,\n              onClick: event => {\n                if (event.target.type !== 'checkbox') {\n                  // <<<--- ИЗМЕНЕНО: Проверка перед навигацией\n                  if (selectedAssets.length > 0) {\n                    if (window.confirm(\"У вас есть выделенные активы. Вы уверены, что хотите открыть карточку?\")) {\n                      navigate(`/assets/${asset.id}`);\n                    }\n                  } else {\n                    navigate(`/assets/${asset.id}`);\n                  }\n                }\n              },\n              selected: isItemSelected,\n              style: {\n                cursor: 'pointer'\n              },\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                padding: \"checkbox\",\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  checked: isItemSelected,\n                  onChange: event => handleClick(event, asset.id),\n                  onClick: event => event.stopPropagation() // Останавливаем всплытие, чтобы не открывать карточку\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 899,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 898,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: asset.inventory_number\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 905,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: `${getTypeName(asset.type_id) || ''} ${asset.brand || ''} ${asset.model || ''}`.trim() || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 906,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: getEmployeeName(asset.responsible_person) || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 908,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: getDepartmentName(asset.department_id) || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 909,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: asset.room || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 910,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 912,\n                columnNumber: 21\n              }, this), extraColumns.map(colKey => {\n                if (colKey === 'status_id') {\n                  return /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: getStatusName(asset.status_id) || ''\n                  }, colKey, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 916,\n                    columnNumber: 32\n                  }, this);\n                }\n                if (colKey === 'purchase_date' && asset.purchase_date) {\n                  return /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: new Date(asset.purchase_date).toLocaleDateString()\n                  }, colKey, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 919,\n                    columnNumber: 32\n                  }, this);\n                }\n                // Для остальных полей используем имя из JSON\n                return /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: asset[colKey] || ''\n                }, colKey, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 922,\n                  columnNumber: 30\n                }, this);\n              })]\n            }, asset.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 880,\n              columnNumber: 19\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(TableRow, {\n            children: /*#__PURE__*/_jsxDEV(TableCell, {\n              colSpan: totalColumnCount,\n              align: \"center\",\n              children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 929,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 928,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 875,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 737,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n      rowsPerPageOptions: [10, 25, 50, 100],\n      component: \"div\",\n      count: filteredAssets.length,\n      rowsPerPage: rowsPerPage,\n      page: page,\n      onPageChange: handleChangePage,\n      onRowsPerPageChange: handleChangeRowsPerPage,\n      labelRowsPerPage: \"\\u0421\\u0442\\u0440\\u043E\\u043A \\u043D\\u0430 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0435:\",\n      labelDisplayedRows: ({\n        from,\n        to,\n        count\n      }) => `${from}-${to} из ${count}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 938,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: deleteDialogOpen,\n      onClose: closeDeleteDialog,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: \"Подтвердите удаление\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 957,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: [\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \", assetsToDelete.length, \" \\u0430\\u043A\\u0442\\u0438\\u0432(\\u043E\\u0432)? \\u042D\\u0442\\u043E \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435 \\u043D\\u0435\\u043B\\u044C\\u0437\\u044F \\u043E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 961,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 960,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: closeDeleteDialog,\n          color: \"primary\",\n          children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 967,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: confirmDelete,\n          color: \"error\",\n          autoFocus: true,\n          children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 970,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 966,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 951,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: navDialogOpen,\n      onClose: () => handleNavDialogClose(false),\n      \"aria-labelledby\": \"nav-dialog-title\",\n      \"aria-describedby\": \"nav-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"nav-dialog-title\",\n        children: \"Подтвердите переход\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 983,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          id: \"nav-dialog-description\",\n          children: \"\\u0423 \\u0432\\u0430\\u0441 \\u0435\\u0441\\u0442\\u044C \\u0432\\u044B\\u0434\\u0435\\u043B\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0430\\u043A\\u0442\\u0438\\u0432\\u044B. \\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043A\\u0438\\u043D\\u0443\\u0442\\u044C \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 987,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 986,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => handleNavDialogClose(false),\n          color: \"primary\",\n          children: \"\\u041E\\u0441\\u0442\\u0430\\u0442\\u044C\\u0441\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 992,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => handleNavDialogClose(true),\n          color: \"error\",\n          autoFocus: true,\n          children: \"\\u041F\\u043E\\u043A\\u0438\\u043D\\u0443\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 995,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 991,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 977,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: snackbar.open,\n      autoHideDuration: 6000,\n      onClose: handleCloseSnackbar,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleCloseSnackbar,\n        severity: snackbar.severity,\n        sx: {\n          width: '100%'\n        },\n        children: snackbar.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1003,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1002,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        .MuiTableCell-root:hover .remove-column-button {\n          opacity: 1;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1007,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 668,\n    columnNumber: 5\n  }, this);\n};\n_s(AssetList, \"kduukQuS2GPWEQsmcEABshiSzQU=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = AssetList;\nexport default AssetList;\nvar _c;\n$RefreshReg$(_c, \"AssetList\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useLocation","Container","Typography","Box","TextField","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Alert","Snackbar","TablePagination","TableSortLabel","Checkbox","MenuItem","Menu","IconButton","CircularProgress","AddIcon","CloseIcon","axios","API_BASE_URL","jsxDEV","_jsxDEV","AssetList","currentUser","_s","assets","setAssets","filteredAssets","setFilteredAssets","searchTerm","setSearchTerm","types","setTypes","statuses","setStatuses","departments","setDepartments","employees","setEmployees","selectedAssets","setSelectedAssets","sortColumn","setSortColumn","sortOrder","setSortOrder","page","setPage","rowsPerPage","setRowsPerPage","snackbar","setSnackbar","open","message","severity","deleteDialogOpen","setDeleteDialogOpen","assetsToDelete","setAssetsToDelete","loading","setLoading","error","setError","extraColumns","setExtraColumns","anchorEl","setAnchorEl","openMenu","Boolean","navDialogOpen","setNavDialogOpen","nextLocation","setNextLocation","confirmedNavigation","setConfirmedNavigation","navigate","location","formatEmployeeName","fullName","parts","trim","split","length","slice","map","part","charAt","toUpperCase","join","handleBeforeUnload","event","preventDefault","returnValue","window","addEventListener","removeEventListener","handleNavigationAttempt","to","confirm","setTimeout","fetchData","assetsRes","typesRes","statusesRes","departmentsRes","employeesRes","Promise","all","get","withCredentials","data","err","console","response","status","getTypeName","typeId","type","find","t","id","name","getStatusName","statusId","s","getDepartmentName","deptId","dept","d","getEmployeeName","empId","emp","e","result","term","toLowerCase","filter","asset","_getTypeName","_asset$brand","_asset$model","type_id","brand","model","baseFieldsMatch","inventory_number","includes","responsible_person","department_id","room","extraFieldsMatch","some","colKey","fieldValue","serial_number","CPU","RAM","Drive","OS","IP_address","status_id","actual_user","purchase_date","number","toString","sort","a","b","aValue","bValue","safeStringify","val","Date","toISOString","String","_getTypeName2","_getStatusName","_getStatusName2","_getStatusName3","_getDepartmentName","_getDepartmentName2","_getEmployeeName","_getEmployeeName2","dateA","dateB","aStr","bStr","handleSort","column","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","target","value","handleSelectAllClick","checked","newSelected","paginatedAssets","handleClick","selectedIndex","indexOf","concat","isSelected","isAllSelected","availableExtraColumns","key","label","handleAddColumnClick","currentTarget","handleAddColumnClose","handleAddColumnSelect","columnKey","handleRemoveExtraColumn","columnKeyToRemove","handlePrintQRCode","res","post","ids","codes","htmlContent","itemsPerPage","i","pageItems","forEach","code","qr_base64","full_name","printWindow","document","write","print","close","handleExportExcel","selectedAssetObjects","dataToExport","row","columnDef","col","toLocaleDateString","allHeaders","Object","keys","headers","rows","obj","values","csvContent","blob","Blob","url","URL","createObjectURL","link","createElement","setAttribute","style","visibility","body","appendChild","click","removeChild","handleDeleteSelected","confirmDelete","delete","closeDeleteDialog","handleNavDialogClose","agree","handleCloseSnackbar","maxWidth","marginTop","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","baseColumnCount","totalColumnCount","variant","gutterBottom","fontSize","fullWidth","onChange","marginBottom","display","gap","mb","flexWrap","color","onClick","disabled","role","align","component","padding","indeterminate","sx","fontWeight","active","direction","width","size","onClose","anchorOrigin","vertical","horizontal","transformOrigin","position","paddingRight","top","right","transform","opacity","transition","backgroundColor","className","isItemSelected","hover","selected","cursor","stopPropagation","colSpan","rowsPerPageOptions","count","onPageChange","onRowsPerPageChange","labelRowsPerPage","labelDisplayedRows","from","autoFocus","autoHideDuration","_c","$RefreshReg$"],"sources":["D:/it_inventory.localhost/frontend/src/components/AssetList.js"],"sourcesContent":["// frontend/src/components/AssetList.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom'; // Импортируем useLocation\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Box,\r\n  TextField,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n  Alert,\r\n  Snackbar,\r\n  TablePagination,\r\n  TableSortLabel,\r\n  Checkbox,\r\n  MenuItem,\r\n  Menu,\r\n  IconButton,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport axios from 'axios';\r\nimport { API_BASE_URL } from '../config'; // Импорт базового URL\r\n\r\nconst AssetList = ({ currentUser }) => {\r\n  const [assets, setAssets] = useState([]);\r\n  const [filteredAssets, setFilteredAssets] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [types, setTypes] = useState([]); // Для отображения имени типа\r\n  const [statuses, setStatuses] = useState([]);\r\n  const [departments, setDepartments] = useState([]);\r\n  const [employees, setEmployees] = useState([]);\r\n  const [selectedAssets, setSelectedAssets] = useState([]);\r\n  const [sortColumn, setSortColumn] = useState('inventory_number');\r\n  const [sortOrder, setSortOrder] = useState('asc');\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(50);\r\n  const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'success' });\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [assetsToDelete, setAssetsToDelete] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  // <<<--- НОВОЕ: Состояния для управления дополнительными колонками\r\n  const [extraColumns, setExtraColumns] = useState([]); // Массив ключей дополнительных колонок\r\n  const [anchorEl, setAnchorEl] = useState(null); // Для управления меню\r\n  const openMenu = Boolean(anchorEl);\r\n\r\n  // <<<--- НОВОЕ: Состояние для диалога подтверждения навигации\r\n  const [navDialogOpen, setNavDialogOpen] = useState(false);\r\n  const [nextLocation, setNextLocation] = useState(null);\r\n  const [confirmedNavigation, setConfirmedNavigation] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n  const location = useLocation(); // Получаем текущую локацию\r\n\r\n  // <<<--- НОВОЕ: Функция для форматирования ФИО\r\n  const formatEmployeeName = useCallback((fullName) => {\r\n    if (!fullName) return '';\r\n    const parts = fullName.trim().split(/\\s+/);\r\n    if (parts.length === 0) return '';\r\n    if (parts.length === 1) return parts[0];\r\n    return `${parts[0]} ${parts.slice(1).map(part => part.charAt(0).toUpperCase() + '.').join('')}`.trim();\r\n  }, []);\r\n\r\n  // <<<--- НОВОЕ: Обработчик beforeunload\r\n  const handleBeforeUnload = useCallback((event) => {\r\n    if (selectedAssets.length > 0) {\r\n      event.preventDefault();\r\n      // Chrome требует установку returnValue\r\n      event.returnValue = '';\r\n      return '';\r\n    }\r\n  }, [selectedAssets]);\r\n\r\n  // <<<--- НОВОЕ: Эффект для установки/снятия beforeunload listener\r\n  useEffect(() => {\r\n    if (selectedAssets.length > 0) {\r\n      window.addEventListener('beforeunload', handleBeforeUnload);\r\n    } else {\r\n      window.removeEventListener('beforeunload', handleBeforeUnload);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeunload', handleBeforeUnload);\r\n    };\r\n  }, [selectedAssets, handleBeforeUnload]);\r\n\r\n  // <<<--- НОВОЕ: Обработчик перехода (для Prompt или ручной навигации)\r\n  // Это упрощённая версия. Для полноценного Prompt из RRv6 нужно больше настройки.\r\n  const handleNavigationAttempt = useCallback((to) => {\r\n    if (selectedAssets.length > 0 && !confirmedNavigation) {\r\n      // Предотвращаем автоматическую навигацию браузера\r\n      if (window.confirm(\"У вас есть выделенные активы. Вы уверены, что хотите покинуть страницу?\")) {\r\n        setConfirmedNavigation(true);\r\n        // Откладываем навигацию на следующий тик, чтобы сначала обновилось состояние\r\n        setTimeout(() => navigate(to), 0);\r\n      }\r\n      return false; // Предотвращаем немедленный переход\r\n    }\r\n    return true; // Разрешаем переход\r\n  }, [selectedAssets, confirmedNavigation, navigate]);\r\n\r\n  // Загрузка данных\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        const [assetsRes, typesRes, statusesRes, departmentsRes, employeesRes] = await Promise.all([\r\n          axios.get(`${API_BASE_URL}/api/assets`, { withCredentials: true }),\r\n          axios.get(`${API_BASE_URL}/api/types`, { withCredentials: true }),\r\n          axios.get(`${API_BASE_URL}/api/statuses`, { withCredentials: true }),\r\n          axios.get(`${API_BASE_URL}/api/departments`, { withCredentials: true }),\r\n          axios.get(`${API_BASE_URL}/api/employees`, { withCredentials: true }),\r\n        ]);\r\n\r\n        setAssets(assetsRes.data);\r\n        setTypes(typesRes.data);\r\n        setStatuses(statusesRes.data);\r\n        setDepartments(departmentsRes.data);\r\n        setEmployees(employeesRes.data);\r\n        setFilteredAssets(assetsRes.data);\r\n      } catch (err) {\r\n        console.error('Ошибка загрузки данных:', err);\r\n        if (err.response && err.response.status === 401) {\r\n          setError('Ошибка аутентификации. Пожалуйста, войдите снова.');\r\n        } else {\r\n          setError('Ошибка загрузки данных. Пожалуйста, попробуйте позже.');\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Функции для получения имен по ID\r\n  const getTypeName = useCallback((typeId) => {\r\n    const type = types.find(t => t.id === typeId);\r\n    return type ? type.name : '';\r\n  }, [types]); // Зависит только от types\r\n\r\n  const getStatusName = useCallback((statusId) => {\r\n    const status = statuses.find(s => s.id === statusId);\r\n    return status ? status.name : '';\r\n  }, [statuses]); // Зависит только от statuses\r\n\r\n  const getDepartmentName = useCallback((deptId) => {\r\n    const dept = departments.find(d => d.id === deptId);\r\n    return dept ? dept.name : '';\r\n  }, [departments]); // Зависит только от departments\r\n\r\n  const getEmployeeName = useCallback((empId) => {\r\n    const emp = employees.find(e => e.id === empId);\r\n    // Используем форматирование ФИО\r\n    return emp ? formatEmployeeName(emp.name) : '';\r\n  }, [employees]); // Зависит только от employees\r\n\r\n  // Фильтрация и сортировка\r\n  useEffect(() => {\r\n    let result = assets;\r\n\r\n    // Поиск\r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      result = result.filter(asset => {\r\n        // Создаем составное \"Наименование\"\r\n        // Используем ?? '' для защиты от null/undefined в отдельных частях имени\r\n        const fullName = `${getTypeName(asset.type_id) ?? ''} ${asset.brand ?? ''} ${asset.model ?? ''}`.toLowerCase().trim();\r\n\r\n        // Базовые поля для поиска\r\n        const baseFieldsMatch =\r\n          (asset.inventory_number && asset.inventory_number.toLowerCase().includes(term)) ||\r\n          fullName.includes(term) ||\r\n          (asset.responsible_person && getEmployeeName(asset.responsible_person).toLowerCase().includes(term)) || // Проверка на null перед вызовом getEmployeeName\r\n          (asset.department_id && getDepartmentName(asset.department_id).toLowerCase().includes(term)) || // Проверка на null\r\n          (asset.room && asset.room.toLowerCase().includes(term));\r\n\r\n        // Дополнительные поля для поиска\r\n        let extraFieldsMatch = false;\r\n        if (extraColumns.length > 0) {\r\n          extraFieldsMatch = extraColumns.some(colKey => {\r\n            // Для всех полей сначала получаем значение, затем проверяем его тип и содержание\r\n            let fieldValue;\r\n\r\n            // Определяем значение поля в зависимости от colKey\r\n            switch (colKey) {\r\n              case 'serial_number':\r\n                fieldValue = asset.serial_number;\r\n                break;\r\n              case 'CPU':\r\n                fieldValue = asset.CPU;\r\n                break;\r\n              case 'RAM':\r\n                fieldValue = asset.RAM;\r\n                break;\r\n              case 'Drive':\r\n                fieldValue = asset.Drive;\r\n                break;\r\n              case 'OS':\r\n                fieldValue = asset.OS;\r\n                break;\r\n              // Убедитесь, что имя поля соответствует тому, как оно хранится в объекте asset\r\n              // Если в asset поле называется IP_address, используйте его\r\n              case 'IP_address':\r\n                fieldValue = asset.IP_address;\r\n                break;\r\n              case 'status_id':\r\n                fieldValue = asset.status_id ? getStatusName(asset.status_id) : '';\r\n                break;\r\n              case 'actual_user':\r\n                fieldValue = asset.actual_user ? formatEmployeeName(getEmployeeName(asset.actual_user)) : '';\r\n                break;\r\n              case 'purchase_date':\r\n                fieldValue = asset.purchase_date;\r\n                break;\r\n              case 'number':\r\n                fieldValue = asset.number;\r\n                break;\r\n              default:\r\n                fieldValue = null;\r\n            }\r\n\r\n            // Проверяем, что fieldValue существует и является строкой, прежде чем искать\r\n            if (fieldValue != null && typeof fieldValue === 'string') {\r\n              return fieldValue.toLowerCase().includes(term);\r\n            }\r\n            // Если fieldValue - это число (например, для RAM в ГБ), преобразуем его в строку\r\n            if (typeof fieldValue === 'number') {\r\n                 return fieldValue.toString().includes(term); // Поиск подстроки в строковом представлении числа\r\n            }\r\n            // Для status_id мы уже получили строку через getStatusName, если ID был валидным\r\n            // Если getStatusName вернул null или не строку, это не совпадение\r\n\r\n            return false; // Если поле не подходит или не найдено совпадение\r\n          });\r\n        }\r\n\r\n        return baseFieldsMatch || extraFieldsMatch;\r\n      });\r\n    }\r\n\r\n    // Сортировка\r\n    // --- ИСПРАВЛЕНА СОРТИРОВКА ---\r\n    result = [...result].sort((a, b) => {\r\n      let aValue = a[sortColumn];\r\n      let bValue = b[sortColumn];\r\n\r\n      // --- Безопасное преобразование в строку и приведение null/undefined ---\r\n      // Это ключевое изменение: всегда обеспечиваем, что aValue и bValue - строки\r\n      const safeStringify = (val) => {\r\n        if (val == null) return ''; // Преобразуем null/undefined в пустую строку\r\n        // Для объектов Date используем их строковое представление\r\n        if (val instanceof Date) return val.toISOString();\r\n        // Для чисел и булевых значений преобразуем в строку\r\n        return String(val);\r\n      };\r\n\r\n      // --- Специальная обработка для определённых колонок ---\r\n      if (sortColumn === 'type_id') {\r\n        aValue = getTypeName(aValue) ?? ''; // Используем ?? для защиты\r\n        bValue = getStatusName(bValue) ?? '';\r\n      } else if (sortColumn === 'status_id') {\r\n        aValue = getStatusName(aValue) ?? '';\r\n        bValue = getStatusName(bValue) ?? '';\r\n      } else if (sortColumn === 'department_id') {\r\n        aValue = getDepartmentName(aValue) ?? '';\r\n        bValue = getDepartmentName(bValue) ?? '';\r\n      } else if (sortColumn === 'responsible_person') {\r\n        aValue = getEmployeeName(aValue) ?? '';\r\n        bValue = getEmployeeName(bValue) ?? '';\r\n      } else if (sortColumn === 'purchase_date') {\r\n        // Преобразуем в Date для корректного сравнения, null -> старая дата\r\n        const dateA = aValue ? new Date(aValue) : new Date(0);\r\n        const dateB = bValue ? new Date(bValue) : new Date(0);\r\n        // Сравнение дат\r\n        if (dateA < dateB) return sortOrder === 'asc' ? -1 : 1;\r\n        if (dateA > dateB) return sortOrder === 'asc' ? 1 : -1;\r\n        return 0;\r\n      }\r\n      // Для всех остальных полей, включая 'OS', 'CPU', 'brand', 'model' и т.д.\r\n      // просто преобразуем значения в строки безопасным способом\r\n      else {\r\n        aValue = safeStringify(aValue);\r\n        bValue = safeStringify(bValue);\r\n      }\r\n\r\n      // --- Теперь aValue и bValue гарантированно строки. Сравниваем. ---\r\n      // Приводим к нижнему регистру для регистронезависимой сортировки\r\n      const aStr = aValue.toLowerCase();\r\n      const bStr = bValue.toLowerCase();\r\n\r\n      // Общее лексикографическое сравнение строк\r\n      if (aStr < bStr) {\r\n        return sortOrder === 'asc' ? -1 : 1;\r\n      }\r\n      if (aStr > bStr) {\r\n        return sortOrder === 'asc' ? 1 : -1;\r\n      }\r\n      return 0;\r\n    });\r\n    // --- КОНЕЦ ИСПРАВЛЕНОЙ СОРТИРОВКИ ---\r\n\r\n    setFilteredAssets(result);\r\n    setPage(0); // Сбросить на первую страницу после фильтрации/сортировки\r\n  }, [assets, searchTerm, sortColumn, sortOrder, types, statuses, departments, employees, extraColumns, getEmployeeName, getDepartmentName, getStatusName, getTypeName]);\r\n\r\n  // Сортировка\r\n  const handleSort = (column) => {\r\n    if (sortColumn === column) {\r\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortColumn(column);\r\n      setSortOrder('asc');\r\n    }\r\n  };\r\n\r\n  // Пагинация\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  // Выбор активов\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelected = paginatedAssets.map((asset) => asset.id);\r\n      setSelectedAssets(newSelected);\r\n      return;\r\n    }\r\n    setSelectedAssets([]);\r\n  };\r\n\r\n  const handleClick = (event, id) => {\r\n    const selectedIndex = selectedAssets.indexOf(id);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selectedAssets, id);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selectedAssets.slice(1));\r\n    } else if (selectedIndex === selectedAssets.length - 1) {\r\n      newSelected = newSelected.concat(selectedAssets.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selectedAssets.slice(0, selectedIndex),\r\n        selectedAssets.slice(selectedIndex + 1),\r\n      );\r\n    }\r\n\r\n    setSelectedAssets(newSelected);\r\n  };\r\n\r\n  const isSelected = (id) => selectedAssets.indexOf(id) !== -1;\r\n\r\n  // Пагинация\r\n  const paginatedAssets = filteredAssets.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage);\r\n  const isAllSelected = paginatedAssets.length > 0 && selectedAssets.length === paginatedAssets.length;\r\n\r\n  // <<<--- НОВОЕ: Логика для дополнительных колонок\r\n  const availableExtraColumns = [\r\n    { key: 'serial_number', label: 'Серийный номер' },\r\n    { key: 'CPU', label: 'Процессор' },\r\n    { key: 'RAM', label: 'Оперативная память (ГБ)' },\r\n    { key: 'Drive', label: 'Диск (HDD/SSD)' },\r\n    { key: 'OS', label: 'Операционная система' },\r\n    { key: 'IP_address', label: 'IP-адрес' }, // Используем имя из JSON\r\n    { key: 'status_id', label: 'Статус' },\r\n    { key: 'actual_user', label: 'Фактический пользователь' },\r\n    { key: 'purchase_date', label: 'Дата покупки' },\r\n    { key: 'number', label: 'Номер' },\r\n  ];\r\n\r\n  const handleAddColumnClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleAddColumnClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleAddColumnSelect = (columnKey) => {\r\n    if (!extraColumns.includes(columnKey)) {\r\n      setExtraColumns([...extraColumns, columnKey]);\r\n    }\r\n    handleAddColumnClose();\r\n  };\r\n\r\n  const handleRemoveExtraColumn = (columnKeyToRemove) => {\r\n    setExtraColumns(extraColumns.filter(key => key !== columnKeyToRemove));\r\n  };\r\n\r\n  // Печать QR-кодов\r\n  const handlePrintQRCode = async () => {\r\n    if (selectedAssets.length === 0) {\r\n      setSnackbar({ open: true, message: 'Выберите хотя бы один актив', severity: 'warning' });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await axios.post(`${API_BASE_URL}/api/qrcodes`, {\r\n        ids: selectedAssets\r\n      }, { withCredentials: true });\r\n\r\n      const codes = res.data;\r\n\r\n      let htmlContent = `\r\n        <html>\r\n          <head>\r\n            <style>\r\n              @page {\r\n                size: A4;\r\n                margin: 0;\r\n              }\r\n\r\n              body {\r\n                width: 21cm;\r\n                padding: 0;\r\n                background-color: #fff;\r\n                font-family: Arial, sans-serif;\r\n              }\r\n\r\n              .page {\r\n                display: flex;\r\n                flex-wrap: wrap;\r\n                gap: 10px;\r\n                padding: 20px;\r\n                box-sizing: border-box;\r\n                page-break-after: always;\r\n                break-after: page;\r\n              }\r\n\r\n              .qr-wrapper {\r\n                width: 3cm;\r\n                height: 3cm;\r\n                position: relative;\r\n                text-align: center;\r\n                font-size: 10px;\r\n                box-sizing: border-box;\r\n                page-break-inside: avoid;\r\n                break-inside: avoid;\r\n              }\r\n\r\n              .qr-container {\r\n                width: 100%;\r\n                height: calc (100%);\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n              }\r\n\r\n              img {\r\n                max-width: 100%;\r\n                max-height: 100%;\r\n                object-fit: contain;\r\n              }\r\n\r\n              .text-top,\r\n              .text-bottom {\r\n                position: absolute;\r\n                left: 50%;\r\n                transform: translateX(-50%);\r\n                white-space: nowrap;\r\n                overflow: hidden;\r\n                text-overflow: ellipsis;\r\n                width: 90%;\r\n                font-size: 8px;\r\n              }\r\n\r\n              .text-top {\r\n                top: 0;\r\n              }\r\n\r\n              .text-bottom {\r\n                bottom: 0;\r\n              }\r\n            </style>\r\n          </head>\r\n          <body>\r\n      `;\r\n\r\n      const itemsPerPage = 48;\r\n\r\n      for (let i = 0; i < codes.length; i += itemsPerPage) {\r\n        const pageItems = codes.slice(i, i + itemsPerPage);\r\n\r\n        htmlContent += `<div class=\"page\">`;\r\n\r\n        pageItems.forEach((code) => {\r\n          htmlContent += `\r\n            <div class=\"qr-wrapper\">\r\n              <div class=\"qr-container\">\r\n                <img src=\"data:image/png;base64,${code.qr_base64}\" />\r\n              </div>\r\n              <span class=\"text-top\">${code.full_name || ''}</span>\r\n              <span class=\"text-bottom\">${code.inventory_number || ''}</span>\r\n            </div>\r\n          `;\r\n        });\r\n\r\n        htmlContent += `</div>`;\r\n      }\r\n\r\n      htmlContent += '</body></html>';\r\n\r\n      const printWindow = window.open('', '_blank');\r\n      printWindow.document.write(htmlContent);\r\n\r\n      setTimeout(() => {\r\n        printWindow.print();\r\n        printWindow.close();\r\n      }, 500);\r\n    } catch (err) {\r\n      console.error('Ошибка при генерации QR-кодов:', err);\r\n      setSnackbar({ open: true, message: 'Не удалось получить QR-коды с сервера', severity: 'error' });\r\n    }\r\n  };\r\n\r\n  // Экспорт в Excel\r\n  const handleExportExcel = () => {\r\n    if (selectedAssets.length === 0) {\r\n      setSnackbar({ open: true, message: 'Выберите хотя бы один актив для экспорта', severity: 'warning' });\r\n      return;\r\n    }\r\n\r\n    const selectedAssetObjects = assets.filter(asset => selectedAssets.includes(asset.id));\r\n\r\n    // Подготавливаем данные для экспорта, включая все отображаемые колонки\r\n    const dataToExport = selectedAssetObjects.map(asset => {\r\n      const row = {\r\n        'Инвентарный номер': asset.inventory_number || '',\r\n        'Наименование': `${getTypeName(asset.type_id) || ''} ${asset.brand || ''} ${asset.model || ''}`.trim(),\r\n        'Ответственный': getEmployeeName(asset.responsible_person),\r\n        'Отдел': getDepartmentName(asset.department_id),\r\n        'Помещение': asset.room || ''\r\n      };\r\n\r\n      // Добавляем данные для дополнительных колонок\r\n      extraColumns.forEach(colKey => {\r\n        const columnDef = availableExtraColumns.find(col => col.key === colKey);\r\n        if (columnDef) {\r\n          if (colKey === 'status_id') {\r\n            row[columnDef.label] = getStatusName(asset.status_id);\r\n          } else if (colKey === 'purchase_date' && asset.purchase_date) {\r\n            row[columnDef.label] = new Date(asset.purchase_date).toLocaleDateString();\r\n          } else {\r\n            // Для остальных полей используем имя из JSON\r\n            row[columnDef.label] = asset[colKey] || '';\r\n          }\r\n        }\r\n      });\r\n\r\n      return row;\r\n    });\r\n\r\n    // Создаем CSV контент\r\n    const allHeaders = Object.keys(dataToExport[0]);\r\n    const headers = allHeaders.join(';') + '\\n';\r\n    const rows = dataToExport.map(obj => Object.values(obj).map(value => `\"${value}\"`).join(';')).join('\\n');\r\n    const csvContent = '\\uFEFF' + headers + rows; // BOM для UTF-8\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `Оборудование_${new Date().toISOString().slice(0, 10)}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  // Удаление активов\r\n  const handleDeleteSelected = () => {\r\n    if (selectedAssets.length === 0) {\r\n      setSnackbar({ open: true, message: 'Выберите активы для удаления', severity: 'warning' });\r\n      return;\r\n    }\r\n    setAssetsToDelete(selectedAssets);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    try {\r\n      await Promise.all(\r\n        assetsToDelete.map(id =>\r\n          axios.delete(`${API_BASE_URL}/api/assets/${id}`, { withCredentials: true })\r\n        )\r\n      );\r\n      setAssets(assets.filter(asset => !assetsToDelete.includes(asset.id)));\r\n      setSelectedAssets([]); // Очищаем выбор\r\n      setAssetsToDelete([]); // Очищаем список на удаление\r\n      setSnackbar({ open: true, message: 'Активы успешно удалены', severity: 'success' });\r\n    } catch (err) {\r\n      console.error('Ошибка при удалении активов:', err);\r\n      setSnackbar({ open: true, message: 'Ошибка при удалении активов', severity: 'error' });\r\n    } finally {\r\n      setDeleteDialogOpen(false);\r\n    }\r\n  };\r\n\r\n  const closeDeleteDialog = () => {\r\n    setDeleteDialogOpen(false);\r\n    setAssetsToDelete([]);\r\n  };\r\n\r\n  // <<<--- НОВОЕ: Обработчики для диалога навигации\r\n  const handleNavDialogClose = (agree = false) => {\r\n    setNavDialogOpen(false);\r\n    if (agree && nextLocation) {\r\n      setConfirmedNavigation(true);\r\n      // Навигация на отложенную локацию\r\n      setTimeout(() => navigate(nextLocation), 0);\r\n    } else {\r\n      // Сброс состояния, если пользователь отменил\r\n      setNextLocation(null);\r\n    }\r\n  };\r\n\r\n  // <<<--- НОВОЕ: Эффект для сброса confirmedNavigation после навигации\r\n  useEffect(() => {\r\n    if (confirmedNavigation) {\r\n      setConfirmedNavigation(false);\r\n      setSelectedAssets([]); // Опционально: сбросить выбор после навигации\r\n    }\r\n  }, [location, confirmedNavigation]);\r\n\r\n  // Уведомления\r\n  const handleCloseSnackbar = () => {\r\n    setSnackbar({ ...snackbar, open: false });\r\n  };\r\n\r\n  if (loading) return (\r\n    <Container maxWidth=\"md\" style={{ marginTop: '20px', textAlign: 'center' }}>\r\n      <CircularProgress />\r\n      <Typography>Загрузка...</Typography>\r\n    </Container>\r\n  );\r\n  if (error) return (\r\n    <Container maxWidth=\"md\" style={{ marginTop: '20px' }}>\r\n      <Alert severity=\"error\">{error}</Alert>\r\n    </Container>\r\n  );\r\n\r\n  // <<<--- НОВОЕ: Определяем количество базовых колонок + 1 (для кнопки +)\r\n  const baseColumnCount = 5 + 1; // Инвентарный номер, Наименование, Ответственный, Отдел, Помещение, кнопка +\r\n  const totalColumnCount = baseColumnCount + extraColumns.length;\r\n\r\n  return (\r\n    <Container maxWidth=\"xl\" style={{ marginTop: '20px' }}>\r\n      {/* Стилизованный заголовок */}\r\n      <Typography variant=\"h5\" gutterBottom style={{ textAlign: 'center', fontSize: '30px' }}>\r\n        <strong>Оборудование</strong>\r\n      </Typography>\r\n\r\n      {/* Поисковая строка */}\r\n      <TextField\r\n        label=\"Поиск\"\r\n        variant=\"outlined\"\r\n        fullWidth\r\n        value={searchTerm}\r\n        onChange={(e) => setSearchTerm(e.target.value)}\r\n        style={{ marginBottom: '16px' }}\r\n      />\r\n    \r\n\r\n      {/* Кнопки действий под строкой поиска */}\r\n      <Box display=\"flex\" gap={2} mb={2} flexWrap=\"wrap\">\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={handleExportExcel}\r\n          disabled={selectedAssets.length === 0}\r\n        >\r\n          Печать Excel\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={handlePrintQRCode}\r\n          disabled={selectedAssets.length === 0}\r\n        >\r\n          Печать QR\r\n        </Button>\r\n        {currentUser && currentUser.role === 'admin' && (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"error\"\r\n            onClick={handleDeleteSelected}\r\n            disabled={selectedAssets.length === 0}\r\n          >\r\n            Удалить\r\n          </Button>\r\n        )}\r\n        {currentUser && currentUser.role === 'admin' && (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"success\"\r\n            onClick={() => {\r\n               if (selectedAssets.length > 0) {\r\n                 if (window.confirm(\"У вас есть выделенные активы. Вы уверены, что хотите покинуть страницу?\")) {\r\n                   setSelectedAssets([]); // Очищаем выбор перед навигацией\r\n                   navigate('/assets/new');\r\n                 }\r\n               } else {\r\n                 navigate('/assets/new');\r\n               }\r\n            }}\r\n          >\r\n            Добавить\r\n          </Button>\r\n        )}\r\n      </Box>\r\n\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" gutterBottom>\r\n          Выделено: {selectedAssets.length}\r\n        </Typography>\r\n\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          {/* <<<--- ИЗМЕНЕНО: Заголовки таблицы с динамическими колонками */}\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell padding=\"checkbox\">\r\n                <Checkbox\r\n                  indeterminate={selectedAssets.length > 0 && selectedAssets.length < paginatedAssets.length}\r\n                  checked={isAllSelected}\r\n                  onChange={handleSelectAllClick}\r\n                />\r\n              </TableCell>\r\n              {/* Базовые колонки */}\r\n              <TableCell sx={{ fontWeight: 'bold' }}>\r\n                <TableSortLabel\r\n                  active={sortColumn === 'inventory_number'}\r\n                  direction={sortColumn === 'inventory_number' ? sortOrder : 'asc'}\r\n                  onClick={() => handleSort('inventory_number')}\r\n                  sx={{ fontWeight: 'bold' }}\r\n                >\r\n                  Инвентарный номер\r\n                </TableSortLabel>\r\n              </TableCell>\r\n              <TableCell sx={{ fontWeight: 'bold' }}>\r\n                <TableSortLabel\r\n                  active={sortColumn === 'type_id'}\r\n                  direction={sortColumn === 'type_id' ? sortOrder : 'asc'}\r\n                  onClick={() => handleSort('type_id')}\r\n                  sx={{ fontWeight: 'bold' }}\r\n                >\r\n                  Наименование\r\n                </TableSortLabel>\r\n              </TableCell>\r\n              <TableCell sx={{ fontWeight: 'bold' }}>\r\n                <TableSortLabel\r\n                  active={sortColumn === 'responsible_person'}\r\n                  direction={sortColumn === 'responsible_person' ? sortOrder : 'asc'}\r\n                  onClick={() => handleSort('responsible_person')}\r\n                  sx={{ fontWeight: 'bold' }}\r\n                >\r\n                  Ответственный\r\n                </TableSortLabel>\r\n              </TableCell>\r\n              <TableCell sx={{ fontWeight: 'bold' }}>\r\n                <TableSortLabel\r\n                  active={sortColumn === 'department_id'}\r\n                  direction={sortColumn === 'department_id' ? sortOrder : 'asc'}\r\n                  onClick={() => handleSort('department_id')}\r\n                  sx={{ fontWeight: 'bold' }}\r\n                >\r\n                  Отдел\r\n                </TableSortLabel>\r\n              </TableCell>\r\n              <TableCell sx={{ fontWeight: 'bold' }}>\r\n                <TableSortLabel\r\n                  active={sortColumn === 'room'}\r\n                  direction={sortColumn === 'room' ? sortOrder : 'asc'}\r\n                  onClick={() => handleSort('room')}\r\n                  sx={{ fontWeight: 'bold' }}\r\n                >\r\n                  Помещение\r\n                </TableSortLabel>\r\n              </TableCell>\r\n              {/* Кнопка \"+\" для добавления колонок */}\r\n              <TableCell sx={{ fontWeight: 'bold', width: '50px' }}>\r\n                <IconButton\r\n                  color=\"success\" // Зелёная кнопка\r\n                  onClick={handleAddColumnClick}\r\n                  size=\"small\"\r\n                  aria-label=\"Добавить колонку\"\r\n                >\r\n                  <AddIcon />\r\n                </IconButton>\r\n                {/* Меню для выбора колонок */}\r\n                <Menu\r\n                  anchorEl={anchorEl}\r\n                  open={openMenu}\r\n                  onClose={handleAddColumnClose}\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                  }}\r\n                  transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                  }}\r\n                >\r\n                  {availableExtraColumns\r\n                    .filter(col => !extraColumns.includes(col.key)) // Показываем только НЕдобавленные\r\n                    .map(col => (\r\n                      <MenuItem key={col.key} onClick={() => handleAddColumnSelect(col.key)}>\r\n                        {col.label}\r\n                      </MenuItem>\r\n                    ))}\r\n                  {availableExtraColumns.filter(col => !extraColumns.includes(col.key)).length === 0 && (\r\n                    <MenuItem disabled>Нет доступных колонок</MenuItem>\r\n                  )}\r\n                </Menu>\r\n              </TableCell>\r\n              {/* Динамические дополнительные колонки */}\r\n              {extraColumns.map(colKey => {\r\n                const columnDef = availableExtraColumns.find(col => col.key === colKey);\r\n                return (\r\n                  <TableCell key={colKey} sx={{ fontWeight: 'bold', position: 'relative' }}>\r\n                    <TableSortLabel\r\n                      active={sortColumn === colKey}\r\n                      direction={sortColumn === colKey ? sortOrder : 'asc'}\r\n                      onClick={() => handleSort(colKey)}\r\n                      sx={{ fontWeight: 'bold', paddingRight: '24px' }} // Отступ для крестика\r\n                    >\r\n                      {columnDef ? columnDef.label : colKey}\r\n                    </TableSortLabel>\r\n                    {/* Кнопка \"крестик\" для удаления колонки */}\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleRemoveExtraColumn(colKey)}\r\n                      sx={{\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        right: 0,\r\n                        transform: 'translateY(-50%)',\r\n                        color: 'red', // Красный крестик\r\n                        opacity: 0, // Скрыто по умолчанию\r\n                        transition: 'opacity 0.2s',\r\n                        padding: '2px',\r\n                        '&:hover': {\r\n                          backgroundColor: 'rgba(255, 0, 0, 0.1)'\r\n                        }\r\n                      }}\r\n                      className=\"remove-column-button\" // Для стилей наведения\r\n                    >\r\n                      <CloseIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                );\r\n              })}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {paginatedAssets.length > 0 ? (\r\n              paginatedAssets.map((asset) => {\r\n                const isItemSelected = isSelected(asset.id);\r\n                return (\r\n                  <TableRow\r\n                    key={asset.id}\r\n                    hover\r\n                    onClick={(event) => {\r\n                      if (event.target.type !== 'checkbox') {\r\n                        // <<<--- ИЗМЕНЕНО: Проверка перед навигацией\r\n                        if (selectedAssets.length > 0) {\r\n                          if (window.confirm(\"У вас есть выделенные активы. Вы уверены, что хотите открыть карточку?\")) {\r\n                            navigate(`/assets/${asset.id}`);\r\n                          }\r\n                        } else {\r\n                          navigate(`/assets/${asset.id}`);\r\n                        }\r\n                      }\r\n                    }}\r\n                    selected={isItemSelected}\r\n                    style={{ cursor: 'pointer' }}\r\n                  >\r\n                    <TableCell padding=\"checkbox\">\r\n                      <Checkbox\r\n                        checked={isItemSelected}\r\n                        onChange={(event) => handleClick(event, asset.id)}\r\n                        onClick={(event) => event.stopPropagation()} // Останавливаем всплытие, чтобы не открывать карточку\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell>{asset.inventory_number}</TableCell>\r\n                    <TableCell>{`${getTypeName(asset.type_id) || ''} ${asset.brand || ''} ${asset.model || ''}`.trim() || ''}</TableCell>\r\n                    {/* <<<--- ИЗМЕНЕНО: Отображение ответственного в формате ФИО */}\r\n                    <TableCell>{getEmployeeName(asset.responsible_person) || ''}</TableCell>\r\n                    <TableCell>{getDepartmentName(asset.department_id) || ''}</TableCell>\r\n                    <TableCell>{asset.room || ''}</TableCell>\r\n                    {/* Пустая ячейка для кнопки \"+\" */}\r\n                    <TableCell></TableCell>\r\n                    {/* Данные для дополнительных колонок */}\r\n                    {extraColumns.map(colKey => {\r\n                      if (colKey === 'status_id') {\r\n                        return <TableCell key={colKey}>{getStatusName(asset.status_id) || ''}</TableCell>;\r\n                      }\r\n                      if (colKey === 'purchase_date' && asset.purchase_date) {\r\n                        return <TableCell key={colKey}>{new Date(asset.purchase_date).toLocaleDateString()}</TableCell>;\r\n                      }\r\n                      // Для остальных полей используем имя из JSON\r\n                      return <TableCell key={colKey}>{asset[colKey] || ''}</TableCell>;\r\n                    })}\r\n                  </TableRow>\r\n                );\r\n              })\r\n            ) : (\r\n              <TableRow>\r\n                <TableCell colSpan={totalColumnCount} align=\"center\">\r\n                  Нет данных\r\n                </TableCell>\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n\r\n      <TablePagination\r\n        rowsPerPageOptions={[10, 25, 50, 100]}\r\n        component=\"div\"\r\n        count={filteredAssets.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n        onRowsPerPageChange={handleChangeRowsPerPage}\r\n        labelRowsPerPage=\"Строк на странице:\"\r\n        labelDisplayedRows={({ from, to, count }) => `${from}-${to} из ${count}`}\r\n      />\r\n\r\n      {/* Диалог подтверждения удаления */}\r\n      <Dialog\r\n        open={deleteDialogOpen}\r\n        onClose={closeDeleteDialog}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Подтвердите удаление\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Вы уверены, что хотите удалить {assetsToDelete.length} актив(ов)?\r\n            Это действие нельзя отменить.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={closeDeleteDialog} color=\"primary\">\r\n            Отмена\r\n          </Button>\r\n          <Button onClick={confirmDelete} color=\"error\" autoFocus>\r\n            Удалить\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* <<<--- НОВОЕ: Диалог подтверждения навигации */}\r\n      <Dialog\r\n        open={navDialogOpen}\r\n        onClose={() => handleNavDialogClose(false)}\r\n        aria-labelledby=\"nav-dialog-title\"\r\n        aria-describedby=\"nav-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"nav-dialog-title\">\r\n          {\"Подтвердите переход\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"nav-dialog-description\">\r\n            У вас есть выделенные активы. Вы уверены, что хотите покинуть страницу?\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleNavDialogClose(false)} color=\"primary\">\r\n            Остаться\r\n          </Button>\r\n          <Button onClick={() => handleNavDialogClose(true)} color=\"error\" autoFocus>\r\n            Покинуть\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Уведомления */}\r\n      <Snackbar open={snackbar.open} autoHideDuration={6000} onClose={handleCloseSnackbar}>\r\n        <Alert onClose={handleCloseSnackbar} severity={snackbar.severity} sx={{ width: '100%' }}>\r\n          {snackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n      <style>{`\r\n        .MuiTableCell-root:hover .remove-column-button {\r\n          opacity: 1;\r\n        }\r\n      `}</style>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AssetList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}