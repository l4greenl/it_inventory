{"ast":null,"code":"var _jsxFileName = \"D:\\\\it_inventory.localhost\\\\frontend\\\\src\\\\components\\\\AssetDetails.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/AssetDetails.js\n// (Предполагается, что этот файл находится по указанному пути)\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Typography, Box, Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Alert, CircularProgress, Grid, TextField, FormControl, InputLabel, Select, MenuItem, FormHelperText, Paper } from '@mui/material';\nimport axios from 'axios';\n// Импортируем базовый URL из config.js\nimport { API_BASE_URL } from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AssetDetails = ({\n  currentUser\n}) => {\n  _s();\n  var _types$find;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [asset, setAsset] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [isEditing, setIsEditing] = useState(false);\n  const [editErrors, setEditErrors] = useState({});\n  const [qrCodeUrl, setQrCodeUrl] = useState('');\n  const [openDeleteDialog, setOpenDeleteDialog] = useState(false);\n\n  // Состояния для выпадающих списков\n  const [types, setTypes] = useState([]);\n  const [statuses, setStatuses] = useState([]);\n  const [employees, setEmployees] = useState([]);\n  const [departments, setDepartments] = useState([]);\n\n  // <<<--- НОВЫЕ СОСТОЯНИЯ ДЛЯ ДИНАМИЧЕСКИХ ПОЛЕЙ\n  const [typeProperties, setTypeProperties] = useState([]); // Свойства для текущего типа\n  const [dynamicFields, setDynamicFields] = useState({}); // Значения динамических полей\n\n  // <<<--- НОВАЯ ФУНКЦИЯ: Сопоставление имени свойства с полем в Asset\n  const mapPropertyNameToAssetField = propertyName => {\n    // Это сопоставление нужно адаптировать под реальные имена свойств в вашей БД\n    const mapping = {\n      'Диагональ': 'diagonal',\n      'Диагональ (дюймы)': 'diagonal',\n      'Операционная система': 'OS',\n      'Процессор': 'CPU',\n      'Оперативная память (ГБ)': 'RAM',\n      'Оперативная память': 'RAM',\n      'Диск (HDD/SSD)': 'Drive',\n      'Диск': 'Drive',\n      'IP-адрес': 'IP_address',\n      // В JS удобнее работать с IP_address\n      'Внутренний номер': 'number'\n      // Добавьте другие сопоставления, если они отличаются\n    };\n    return mapping[propertyName] || propertyName.toLowerCase().replace(/\\s+/g, '_'); // fallback\n  };\n\n  // Загрузка данных актива и справочников\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        // Параллельная загрузка данных актива и справочников\n        const [assetRes, typesRes, statusesRes, employeesRes, departmentsRes] = await Promise.all([axios.get(`${API_BASE_URL}/api/assets/${id}`, {\n          withCredentials: true\n        }), axios.get(`${API_BASE_URL}/api/types`, {\n          withCredentials: true\n        }), axios.get(`${API_BASE_URL}/api/statuses`, {\n          withCredentials: true\n        }), axios.get(`${API_BASE_URL}/api/employees`, {\n          withCredentials: true\n        }), axios.get(`${API_BASE_URL}/api/departments`, {\n          withCredentials: true\n        })]);\n        const assetData = assetRes.data;\n        setAsset(assetData);\n        setTypes(typesRes.data);\n        setStatuses(statusesRes.data);\n        setEmployees(employeesRes.data);\n        setDepartments(departmentsRes.data);\n\n        // <<<--- ИНИЦИАЛИЗАЦИЯ ДИНАМИЧЕСКИХ ПОЛЕЙ ЗНАЧЕНИЯМИ ИЗ АКТИВА\n        const initialDynamicFields = {};\n        // Предполагаем, что имена полей в assetData совпадают с ключами в dynamicFields\n        // (например, assetData.OS, assetData.IP_address и т.д.)\n        initialDynamicFields['diagonal'] = assetData.diagonal || '';\n        initialDynamicFields['CPU'] = assetData.CPU || '';\n        initialDynamicFields['RAM'] = assetData.RAM || '';\n        initialDynamicFields['Drive'] = assetData.Drive || '';\n        initialDynamicFields['OS'] = assetData.OS || '';\n        initialDynamicFields['IP_address'] = assetData.IP_address || '';\n        initialDynamicFields['number'] = assetData.number || '';\n        // Добавьте инициализацию для других полей, если они есть в модели\n        setDynamicFields(initialDynamicFields);\n\n        // Загрузка QR-кода\n        setQrCodeUrl(`${API_BASE_URL}/api/assets/${id}/qr`);\n      } catch (err) {\n        console.error('Ошибка при загрузке актива:', err);\n        setError('Не удалось загрузить данные актива.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [id]);\n\n  // <<<--- ЭФФЕКТ: Загрузка свойств типа при изменении asset.type_id\n  useEffect(() => {\n    const loadTypeProperties = async () => {\n      if (asset && asset.type_id) {\n        try {\n          const res = await axios.get(`${API_BASE_URL}/api/types/${asset.type_id}/properties`, {\n            withCredentials: true\n          });\n          setTypeProperties(res.data);\n        } catch (err) {\n          console.error('Ошибка при загрузке свойств типа:', err);\n          setTypeProperties([]);\n        }\n      } else {\n        setTypeProperties([]);\n      }\n    };\n    loadTypeProperties();\n  }, [asset === null || asset === void 0 ? void 0 : asset.type_id]); // Зависит от asset.type_id\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAsset(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Очистка ошибок при изменении поля\n    if (editErrors[name]) {\n      setEditErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  // <<<--- НОВЫЙ ОБРАБОТЧИК: Изменение динамических полей\n  const handleDynamicFieldChange = fieldName => e => {\n    const {\n      value\n    } = e.target;\n    setDynamicFields(prev => ({\n      ...prev,\n      [fieldName]: value\n    }));\n    // Очистка ошибок для динамических полей, если они будут\n    // if (errors[fieldName]) {\n    //   setErrors((prev) => ({ ...prev, [fieldName]: '' }));\n    // }\n  };\n  const handleEdit = () => {\n    setIsEditing(true);\n  };\n  const handleSave = async () => {\n    // Простая валидация на фронтенде (можно расширить)\n    const newErrors = {};\n    if (!asset.inventory_number) newErrors.inventory_number = 'Обязательное поле';\n    if (!asset.type_id) newErrors.type_id = 'Обязательное поле';\n    if (!asset.status_id) newErrors.status_id = 'Обязательное поле';\n    if (!asset.responsible_person) newErrors.responsible_person = 'Обязательное поле';\n    if (!asset.department_id) newErrors.department_id = 'Обязательное поле';\n    if (!asset.purchase_date) newErrors.purchase_date = 'Обязательное поле';\n    if (Object.keys(newErrors).length > 0) {\n      setEditErrors(newErrors);\n      alert('Пожалуйста, заполните все обязательные поля');\n      return;\n    }\n    try {\n      // <<<--- ИЗМЕНЕНО: Формируем данные для отправки, объединяя основные поля и динамические\n      const dataToSend = {\n        ...asset,\n        ...dynamicFields // Добавляем значения динамических полей\n        // Убедитесь, что имена полей в dynamicFields совпадают с ожидаемыми бэкендом (diagonal, CPU и т.д.)\n        // Если бэкенд ожидает 'IP-address', а не 'IP_address', нужно преобразовать:\n        // ...(dynamicFields.IP_address !== undefined ? { 'IP-address': dynamicFields.IP_address } : {}),\n        // ...(dynamicFields.IP_address !== undefined ? {} : { IP_address: undefined }) // Удаляем старый ключ\n      };\n      await axios.put(`${API_BASE_URL}/api/assets/${id}`, dataToSend, {\n        withCredentials: true\n      });\n      alert('Данные успешно обновлены');\n      setIsEditing(false);\n    } catch (err) {\n      alert('Ошибка при сохранении изменений');\n      console.error(err);\n    }\n  };\n  const handleCancel = () => {\n    setIsEditing(false);\n    // Сбросить изменения в состоянии asset к исходным данным\n    // Это можно сделать, сохранив оригинальные данные в отдельном состоянии\n    // и копируя их обратно при отмене.\n    window.location.reload(); // Простое решение, можно улучшить\n  };\n  const handleOpenDeleteDialog = () => {\n    setOpenDeleteDialog(true);\n  };\n  const handleCloseDeleteDialog = () => {\n    setOpenDeleteDialog(false);\n  };\n  const handleDelete = async () => {\n    try {\n      await axios.delete(`${API_BASE_URL}/api/assets/${id}`, {\n        withCredentials: true\n      });\n      alert('Актив успешно удален');\n      navigate('/assets');\n    } catch (err) {\n      alert('Ошибка при удалении актива');\n      console.error(err);\n    } finally {\n      handleCloseDeleteDialog();\n    }\n  };\n\n  // <<<--- НОВАЯ ФУНКЦИЯ: Рендеринг динамического поля\n  const renderDynamicField = property => {\n    const propertyName = property.name;\n    // Используем ту же функцию сопоставления, что и в AddAsset\n    const fieldName = mapPropertyNameToAssetField(propertyName);\n    // <<<--- ИЗМЕНЕНО: Получаем значение из dynamicFields\n    const value = dynamicFields[fieldName] || '';\n\n    // Определяем тип поля ввода на основе имени свойства (можно усложнить)\n    let fieldType = 'text';\n    if (propertyName.toLowerCase().includes('дата')) {\n      fieldType = 'date';\n    }\n    return /*#__PURE__*/_jsxDEV(TextField, {\n      // Используем fieldName как ключ\n      label: propertyName,\n      name: fieldName,\n      value: value,\n      onChange: handleDynamicFieldChange(fieldName),\n      fullWidth: true,\n      margin: \"normal\",\n      disabled: !isEditing\n      // Добавить error и helperText, если будут ошибки валидации для этих полей\n      // error={!!errors[fieldName]}\n      // helperText={errors[fieldName]}\n    }, fieldName, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    style: {\n      marginTop: '20px',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 261,\n    columnNumber: 5\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    style: {\n      marginTop: '20px'\n    },\n    children: /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 268,\n    columnNumber: 5\n  }, this);\n  if (!asset) return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    style: {\n      marginTop: '20px'\n    },\n    children: /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"warning\",\n      children: \"\\u0410\\u043A\\u0442\\u0438\\u0432 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 274,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    style: {\n      marginTop: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      style: {\n        padding: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        mb: 2,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: [((_types$find = types.find(t => t.id === asset.type_id)) === null || _types$find === void 0 ? void 0 : _types$find.name) || 'Без типа', \" \", asset.brand, \" \", asset.model]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), currentUser && currentUser.role === 'admin' && !isEditing && /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            onClick: handleEdit,\n            style: {\n              marginRight: '10px'\n            },\n            children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"error\",\n            onClick: handleOpenDeleteDialog,\n            children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"\\u0421\\u0435\\u0440\\u0438\\u0439\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440\",\n            name: \"serial_number\",\n            value: asset.serial_number || '',\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\",\n            disabled: !isEditing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"\\u0418\\u043D\\u0432\\u0435\\u043D\\u0442\\u0430\\u0440\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440 *\",\n            name: \"inventory_number\",\n            value: asset.inventory_number || '',\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\",\n            error: !!editErrors.inventory_number,\n            helperText: editErrors.inventory_number,\n            disabled: !isEditing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            margin: \"normal\",\n            error: !!editErrors.type_id,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              id: \"type-label\",\n              children: \"\\u0422\\u0438\\u043F \\u0443\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u0430 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"type-label\",\n              label: \"\\u0422\\u0438\\u043F \\u0443\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u0430 *\",\n              name: \"type_id\",\n              value: asset.type_id || '',\n              onChange: handleChange,\n              disabled: !isEditing,\n              children: types.map(type => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: type.id,\n                children: type.name\n              }, type.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this), editErrors.type_id && /*#__PURE__*/_jsxDEV(FormHelperText, {\n              children: editErrors.type_id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"\\u0424\\u0438\\u0440\\u043C\\u0430\",\n            name: \"brand\",\n            value: asset.brand || '',\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\",\n            disabled: !isEditing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"\\u041C\\u043E\\u0434\\u0435\\u043B\\u044C\",\n            name: \"model\",\n            value: asset.model || '',\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\",\n            disabled: !isEditing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            margin: \"normal\",\n            error: !!editErrors.status_id,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              id: \"status-label\",\n              children: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"status-label\",\n              label: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441 *\",\n              name: \"status_id\",\n              value: asset.status_id || '',\n              onChange: handleChange,\n              disabled: !isEditing,\n              children: statuses.map(stat => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: stat.id,\n                children: stat.name\n              }, stat.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this), editErrors.status_id && /*#__PURE__*/_jsxDEV(FormHelperText, {\n              children: editErrors.status_id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 40\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"\\u0424\\u0430\\u043A\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\",\n            name: \"actual_user\",\n            value: asset.actual_user || '',\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\",\n            disabled: !isEditing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            margin: \"normal\",\n            error: !!editErrors.responsible_person,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              id: \"responsible-person-label\",\n              children: \"\\u041E\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u044B\\u0439 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"responsible-person-label\",\n              label: \"\\u041E\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u044B\\u0439 *\",\n              name: \"responsible_person\",\n              value: asset.responsible_person || '',\n              onChange: handleChange,\n              disabled: !isEditing,\n              children: employees.map(emp => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: emp.id,\n                children: emp.name\n              }, emp.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this), editErrors.responsible_person && /*#__PURE__*/_jsxDEV(FormHelperText, {\n              children: editErrors.responsible_person\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 49\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            margin: \"normal\",\n            error: !!editErrors.department_id,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              id: \"department-label\",\n              children: \"\\u041E\\u0442\\u0434\\u0435\\u043B (\\u043F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435) *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"department-label\",\n              label: \"\\u041E\\u0442\\u0434\\u0435\\u043B (\\u043F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435) *\",\n              name: \"department_id\",\n              value: asset.department_id || '',\n              onChange: handleChange,\n              disabled: !isEditing,\n              children: departments.map(dept => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: dept.id,\n                children: dept.name\n              }, dept.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 15\n            }, this), editErrors.department_id && /*#__PURE__*/_jsxDEV(FormHelperText, {\n              children: editErrors.department_id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 44\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"\\u041F\\u043E\\u043C\\u0435\\u0449\\u0435\\u043D\\u0438\\u0435\",\n            name: \"room\",\n            value: asset.room || '',\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\",\n            disabled: !isEditing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"\\u0414\\u0430\\u0442\\u0430 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0438 *\",\n            name: \"purchase_date\",\n            type: \"date\",\n            value: asset.purchase_date || '',\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\",\n            error: !!editErrors.purchase_date,\n            helperText: editErrors.purchase_date,\n            InputLabelProps: {\n              shrink: true\n            },\n            disabled: !isEditing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\",\n            name: \"comments\",\n            value: asset.comments || '',\n            onChange: handleChange,\n            fullWidth: true,\n            multiline: true,\n            rows: 4,\n            margin: \"normal\",\n            disabled: !isEditing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), typeProperties.map(property => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: renderDynamicField(property)\n        }, property.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), isEditing && /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        mt: 2,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCancel,\n          style: {\n            marginRight: '10px'\n          },\n          children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleSave,\n          children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      style: {\n        padding: '20px',\n        marginTop: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        children: \"QR-\\u043A\\u043E\\u0434 \\u0430\\u043A\\u0442\\u0438\\u0432\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 9\n      }, this), qrCodeUrl ? /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: qrCodeUrl,\n          alt: `QR-код для актива ${asset.inventory_number}`,\n          style: {\n            maxWidth: '200px',\n            height: 'auto',\n            marginBottom: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: () => {\n            const printWindow = window.open(qrCodeUrl, '_blank');\n            printWindow.onload = () => {\n              printWindow.print();\n            };\n          },\n          children: \"\\u041F\\u0435\\u0447\\u0430\\u0442\\u044C QR-\\u043A\\u043E\\u0434\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 QR-\\u043A\\u043E\\u0434\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openDeleteDialog,\n      onClose: handleCloseDeleteDialog,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: \"Подтвердите удаление\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: [\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0430\\u043A\\u0442\\u0438\\u0432 \\\"\", asset.inventory_number, \"\\\"? \\u042D\\u0442\\u043E \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435 \\u043D\\u0435\\u043B\\u044C\\u0437\\u044F \\u043E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCloseDeleteDialog,\n          color: \"primary\",\n          children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleDelete,\n          color: \"error\",\n          autoFocus: true,\n          children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 280,\n    columnNumber: 5\n  }, this);\n};\n_s(AssetDetails, \"+w5vsD9QqgeqPJ239ftJ/Yfi+yo=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = AssetDetails;\nexport default AssetDetails;\nvar _c;\n$RefreshReg$(_c, \"AssetDetails\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Container","Typography","Box","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Alert","CircularProgress","Grid","TextField","FormControl","InputLabel","Select","MenuItem","FormHelperText","Paper","axios","API_BASE_URL","jsxDEV","_jsxDEV","AssetDetails","currentUser","_s","_types$find","id","navigate","asset","setAsset","loading","setLoading","error","setError","isEditing","setIsEditing","editErrors","setEditErrors","qrCodeUrl","setQrCodeUrl","openDeleteDialog","setOpenDeleteDialog","types","setTypes","statuses","setStatuses","employees","setEmployees","departments","setDepartments","typeProperties","setTypeProperties","dynamicFields","setDynamicFields","mapPropertyNameToAssetField","propertyName","mapping","toLowerCase","replace","fetchData","assetRes","typesRes","statusesRes","employeesRes","departmentsRes","Promise","all","get","withCredentials","assetData","data","initialDynamicFields","diagonal","CPU","RAM","Drive","OS","IP_address","number","err","console","loadTypeProperties","type_id","res","handleChange","e","name","value","target","prev","handleDynamicFieldChange","fieldName","handleEdit","handleSave","newErrors","inventory_number","status_id","responsible_person","department_id","purchase_date","Object","keys","length","alert","dataToSend","put","handleCancel","window","location","reload","handleOpenDeleteDialog","handleCloseDeleteDialog","handleDelete","delete","renderDynamicField","property","fieldType","includes","label","onChange","fullWidth","margin","disabled","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","style","marginTop","textAlign","children","severity","elevation","padding","display","justifyContent","alignItems","mb","variant","find","t","brand","model","role","onClick","marginRight","color","container","spacing","item","xs","md","serial_number","helperText","labelId","map","type","stat","actual_user","emp","dept","room","InputLabelProps","shrink","comments","multiline","rows","mt","gutterBottom","flexDirection","src","alt","height","marginBottom","printWindow","open","onload","print","onClose","autoFocus","_c","$RefreshReg$"],"sources":["D:/it_inventory.localhost/frontend/src/components/AssetDetails.js"],"sourcesContent":["// frontend/src/components/AssetDetails.js\r\n// (Предполагается, что этот файл находится по указанному пути)\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n  Alert,\r\n  CircularProgress,\r\n  Grid,\r\n  TextField,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  FormHelperText,\r\n  Paper,\r\n} from '@mui/material';\r\nimport axios from 'axios';\r\n// Импортируем базовый URL из config.js\r\nimport { API_BASE_URL } from '../config'; \r\n\r\nconst AssetDetails = ({ currentUser }) => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [asset, setAsset] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editErrors, setEditErrors] = useState({});\r\n  const [qrCodeUrl, setQrCodeUrl] = useState('');\r\n  const [openDeleteDialog, setOpenDeleteDialog] = useState(false);\r\n\r\n  // Состояния для выпадающих списков\r\n  const [types, setTypes] = useState([]);\r\n  const [statuses, setStatuses] = useState([]);\r\n  const [employees, setEmployees] = useState([]);\r\n  const [departments, setDepartments] = useState([]);\r\n\r\n  // <<<--- НОВЫЕ СОСТОЯНИЯ ДЛЯ ДИНАМИЧЕСКИХ ПОЛЕЙ\r\n  const [typeProperties, setTypeProperties] = useState([]); // Свойства для текущего типа\r\n  const [dynamicFields, setDynamicFields] = useState({}); // Значения динамических полей\r\n\r\n  // <<<--- НОВАЯ ФУНКЦИЯ: Сопоставление имени свойства с полем в Asset\r\n  const mapPropertyNameToAssetField = (propertyName) => {\r\n    // Это сопоставление нужно адаптировать под реальные имена свойств в вашей БД\r\n    const mapping = {\r\n      'Диагональ': 'diagonal',\r\n      'Диагональ (дюймы)': 'diagonal',\r\n      'Операционная система': 'OS',\r\n      'Процессор': 'CPU',\r\n      'Оперативная память (ГБ)': 'RAM',\r\n      'Оперативная память': 'RAM',\r\n      'Диск (HDD/SSD)': 'Drive',\r\n      'Диск': 'Drive',\r\n      'IP-адрес': 'IP_address', // В JS удобнее работать с IP_address\r\n      'Внутренний номер': 'number',\r\n      // Добавьте другие сопоставления, если они отличаются\r\n    };\r\n    return mapping[propertyName] || propertyName.toLowerCase().replace(/\\s+/g, '_'); // fallback\r\n  };\r\n\r\n  // Загрузка данных актива и справочников\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        // Параллельная загрузка данных актива и справочников\r\n        const [assetRes, typesRes, statusesRes, employeesRes, departmentsRes] = await Promise.all([\r\n          axios.get(`${API_BASE_URL}/api/assets/${id}`, { withCredentials: true }),\r\n          axios.get(`${API_BASE_URL}/api/types`, { withCredentials: true }),\r\n          axios.get(`${API_BASE_URL}/api/statuses`, { withCredentials: true }),\r\n          axios.get(`${API_BASE_URL}/api/employees`, { withCredentials: true }),\r\n          axios.get(`${API_BASE_URL}/api/departments`, { withCredentials: true }),\r\n        ]);\r\n\r\n        const assetData = assetRes.data;\r\n        setAsset(assetData);\r\n        setTypes(typesRes.data);\r\n        setStatuses(statusesRes.data);\r\n        setEmployees(employeesRes.data);\r\n        setDepartments(departmentsRes.data);\r\n\r\n        // <<<--- ИНИЦИАЛИЗАЦИЯ ДИНАМИЧЕСКИХ ПОЛЕЙ ЗНАЧЕНИЯМИ ИЗ АКТИВА\r\n        const initialDynamicFields = {};\r\n        // Предполагаем, что имена полей в assetData совпадают с ключами в dynamicFields\r\n        // (например, assetData.OS, assetData.IP_address и т.д.)\r\n        initialDynamicFields['diagonal'] = assetData.diagonal || '';\r\n        initialDynamicFields['CPU'] = assetData.CPU || '';\r\n        initialDynamicFields['RAM'] = assetData.RAM || '';\r\n        initialDynamicFields['Drive'] = assetData.Drive || '';\r\n        initialDynamicFields['OS'] = assetData.OS || '';\r\n        initialDynamicFields['IP_address'] = assetData.IP_address || '';\r\n        initialDynamicFields['number'] = assetData.number || '';\r\n        // Добавьте инициализацию для других полей, если они есть в модели\r\n        setDynamicFields(initialDynamicFields);\r\n\r\n        // Загрузка QR-кода\r\n        setQrCodeUrl(`${API_BASE_URL}/api/assets/${id}/qr`);\r\n\r\n      } catch (err) {\r\n        console.error('Ошибка при загрузке актива:', err);\r\n        setError('Не удалось загрузить данные актива.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [id]);\r\n\r\n  // <<<--- ЭФФЕКТ: Загрузка свойств типа при изменении asset.type_id\r\n  useEffect(() => {\r\n    const loadTypeProperties = async () => {\r\n      if (asset && asset.type_id) {\r\n        try {\r\n          const res = await axios.get(`${API_BASE_URL}/api/types/${asset.type_id}/properties`, { withCredentials: true });\r\n          setTypeProperties(res.data);\r\n        } catch (err) {\r\n          console.error('Ошибка при загрузке свойств типа:', err);\r\n          setTypeProperties([]);\r\n        }\r\n      } else {\r\n        setTypeProperties([]);\r\n      }\r\n    };\r\n\r\n    loadTypeProperties();\r\n  }, [asset?.type_id]); // Зависит от asset.type_id\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setAsset((prev) => ({ ...prev, [name]: value }));\r\n\r\n    // Очистка ошибок при изменении поля\r\n    if (editErrors[name]) {\r\n      setEditErrors((prev) => ({ ...prev, [name]: '' }));\r\n    }\r\n  };\r\n\r\n  // <<<--- НОВЫЙ ОБРАБОТЧИК: Изменение динамических полей\r\n  const handleDynamicFieldChange = (fieldName) => (e) => {\r\n    const { value } = e.target;\r\n    setDynamicFields((prev) => ({ ...prev, [fieldName]: value }));\r\n    // Очистка ошибок для динамических полей, если они будут\r\n    // if (errors[fieldName]) {\r\n    //   setErrors((prev) => ({ ...prev, [fieldName]: '' }));\r\n    // }\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIsEditing(true);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    // Простая валидация на фронтенде (можно расширить)\r\n    const newErrors = {};\r\n    if (!asset.inventory_number) newErrors.inventory_number = 'Обязательное поле';\r\n    if (!asset.type_id) newErrors.type_id = 'Обязательное поле';\r\n    if (!asset.status_id) newErrors.status_id = 'Обязательное поле';\r\n    if (!asset.responsible_person) newErrors.responsible_person = 'Обязательное поле';\r\n    if (!asset.department_id) newErrors.department_id = 'Обязательное поле';\r\n    if (!asset.purchase_date) newErrors.purchase_date = 'Обязательное поле';\r\n\r\n    if (Object.keys(newErrors).length > 0) {\r\n      setEditErrors(newErrors);\r\n      alert('Пожалуйста, заполните все обязательные поля');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // <<<--- ИЗМЕНЕНО: Формируем данные для отправки, объединяя основные поля и динамические\r\n      const dataToSend = {\r\n        ...asset,\r\n        ...dynamicFields // Добавляем значения динамических полей\r\n        // Убедитесь, что имена полей в dynamicFields совпадают с ожидаемыми бэкендом (diagonal, CPU и т.д.)\r\n        // Если бэкенд ожидает 'IP-address', а не 'IP_address', нужно преобразовать:\r\n        // ...(dynamicFields.IP_address !== undefined ? { 'IP-address': dynamicFields.IP_address } : {}),\r\n        // ...(dynamicFields.IP_address !== undefined ? {} : { IP_address: undefined }) // Удаляем старый ключ\r\n      };\r\n\r\n      await axios.put(`${API_BASE_URL}/api/assets/${id}`, dataToSend, { withCredentials: true });\r\n      alert('Данные успешно обновлены');\r\n      setIsEditing(false);\r\n    } catch (err) {\r\n      alert('Ошибка при сохранении изменений');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsEditing(false);\r\n    // Сбросить изменения в состоянии asset к исходным данным\r\n    // Это можно сделать, сохранив оригинальные данные в отдельном состоянии\r\n    // и копируя их обратно при отмене.\r\n    window.location.reload(); // Простое решение, можно улучшить\r\n  };\r\n\r\n  const handleOpenDeleteDialog = () => {\r\n    setOpenDeleteDialog(true);\r\n  };\r\n\r\n  const handleCloseDeleteDialog = () => {\r\n    setOpenDeleteDialog(false);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await axios.delete(`${API_BASE_URL}/api/assets/${id}`, { withCredentials: true });\r\n      alert('Актив успешно удален');\r\n      navigate('/assets');\r\n    } catch (err) {\r\n      alert('Ошибка при удалении актива');\r\n      console.error(err);\r\n    } finally {\r\n      handleCloseDeleteDialog();\r\n    }\r\n  };\r\n\r\n  // <<<--- НОВАЯ ФУНКЦИЯ: Рендеринг динамического поля\r\n  const renderDynamicField = (property) => {\r\n    const propertyName = property.name;\r\n    // Используем ту же функцию сопоставления, что и в AddAsset\r\n    const fieldName = mapPropertyNameToAssetField(propertyName);\r\n    // <<<--- ИЗМЕНЕНО: Получаем значение из dynamicFields\r\n    const value = dynamicFields[fieldName] || '';\r\n\r\n    // Определяем тип поля ввода на основе имени свойства (можно усложнить)\r\n    let fieldType = 'text';\r\n    if (propertyName.toLowerCase().includes('дата')) {\r\n      fieldType = 'date';\r\n    }\r\n\r\n    return (\r\n      <TextField\r\n        key={fieldName} // Используем fieldName как ключ\r\n        label={propertyName}\r\n        name={fieldName}\r\n        value={value}\r\n        onChange={handleDynamicFieldChange(fieldName)}\r\n        fullWidth\r\n        margin=\"normal\"\r\n        disabled={!isEditing}\r\n        // Добавить error и helperText, если будут ошибки валидации для этих полей\r\n        // error={!!errors[fieldName]}\r\n        // helperText={errors[fieldName]}\r\n      />\r\n    );\r\n  };\r\n\r\n  if (loading) return (\r\n    <Container maxWidth=\"md\" style={{ marginTop: '20px', textAlign: 'center' }}>\r\n      <CircularProgress />\r\n      <Typography>Загрузка...</Typography>\r\n    </Container>\r\n  );\r\n\r\n  if (error) return (\r\n    <Container maxWidth=\"md\" style={{ marginTop: '20px' }}>\r\n      <Alert severity=\"error\">{error}</Alert>\r\n    </Container>\r\n  );\r\n\r\n  if (!asset) return (\r\n    <Container maxWidth=\"md\" style={{ marginTop: '20px' }}>\r\n      <Alert severity=\"warning\">Актив не найден</Alert>\r\n    </Container>\r\n  );\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" style={{ marginTop: '20px' }}>\r\n      <Paper elevation={3} style={{ padding: '20px' }}>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\r\n          <Typography variant=\"h5\">\r\n            {/* Отображаем составное имя актива */}\r\n            {types.find(t => t.id === asset.type_id)?.name || 'Без типа'} {asset.brand} {asset.model}\r\n          </Typography>\r\n          {currentUser && currentUser.role === 'admin' && !isEditing && (\r\n            <Box>\r\n              <Button variant=\"outlined\" onClick={handleEdit} style={{ marginRight: '10px' }}>\r\n                Редактировать\r\n              </Button>\r\n              <Button variant=\"outlined\" color=\"error\" onClick={handleOpenDeleteDialog}>\r\n                Удалить\r\n              </Button>\r\n            </Box>\r\n          )}\r\n        </Box>\r\n\r\n        <Grid container spacing={2}>\r\n          {/* Левая колонка */}\r\n          <Grid item xs={12} md={6}>\r\n            <TextField\r\n              label=\"Серийный номер\"\r\n              name=\"serial_number\"\r\n              value={asset.serial_number || ''}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              disabled={!isEditing}\r\n            />\r\n            <TextField\r\n              label=\"Инвентарный номер *\"\r\n              name=\"inventory_number\"\r\n              value={asset.inventory_number || ''}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              error={!!editErrors.inventory_number}\r\n              helperText={editErrors.inventory_number}\r\n              disabled={!isEditing}\r\n            />\r\n            <FormControl fullWidth margin=\"normal\" error={!!editErrors.type_id}>\r\n              <InputLabel id=\"type-label\">Тип устройства *</InputLabel>\r\n              <Select\r\n                labelId=\"type-label\"\r\n                label=\"Тип устройства *\"\r\n                name=\"type_id\"\r\n                value={asset.type_id || ''}\r\n                onChange={handleChange}\r\n                disabled={!isEditing}\r\n              >\r\n                {types.map(type => (\r\n                  <MenuItem key={type.id} value={type.id}>\r\n                    {type.name}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n              {editErrors.type_id && <FormHelperText>{editErrors.type_id}</FormHelperText>}\r\n            </FormControl>\r\n            <TextField\r\n              label=\"Фирма\"\r\n              name=\"brand\"\r\n              value={asset.brand || ''}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              disabled={!isEditing}\r\n            />\r\n            <TextField\r\n              label=\"Модель\"\r\n              name=\"model\"\r\n              value={asset.model || ''}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              disabled={!isEditing}\r\n            />\r\n            <FormControl fullWidth margin=\"normal\" error={!!editErrors.status_id}>\r\n              <InputLabel id=\"status-label\">Статус *</InputLabel>\r\n              <Select\r\n                labelId=\"status-label\"\r\n                label=\"Статус *\"\r\n                name=\"status_id\"\r\n                value={asset.status_id || ''}\r\n                onChange={handleChange}\r\n                disabled={!isEditing}\r\n              >\r\n                {statuses.map(stat => (\r\n                  <MenuItem key={stat.id} value={stat.id}>\r\n                    {stat.name}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n              {editErrors.status_id && <FormHelperText>{editErrors.status_id}</FormHelperText>}\r\n            </FormControl>\r\n            <TextField\r\n              label=\"Фактический пользователь\"\r\n              name=\"actual_user\"\r\n              value={asset.actual_user || ''}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              disabled={!isEditing}\r\n            />\r\n          </Grid>\r\n\r\n          {/* Правая колонка */}\r\n          <Grid item xs={12} md={6}>\r\n            <FormControl fullWidth margin=\"normal\" error={!!editErrors.responsible_person}>\r\n              <InputLabel id=\"responsible-person-label\">Ответственный *</InputLabel>\r\n              <Select\r\n                labelId=\"responsible-person-label\"\r\n                label=\"Ответственный *\"\r\n                name=\"responsible_person\"\r\n                value={asset.responsible_person || ''}\r\n                onChange={handleChange}\r\n                disabled={!isEditing}\r\n              >\r\n                {employees.map(emp => (\r\n                  <MenuItem key={emp.id} value={emp.id}>\r\n                    {emp.name}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n              {editErrors.responsible_person && <FormHelperText>{editErrors.responsible_person}</FormHelperText>}\r\n            </FormControl>\r\n            <FormControl fullWidth margin=\"normal\" error={!!editErrors.department_id}>\r\n              <InputLabel id=\"department-label\">Отдел (подразделение) *</InputLabel>\r\n              <Select\r\n                labelId=\"department-label\"\r\n                label=\"Отдел (подразделение) *\"\r\n                name=\"department_id\"\r\n                value={asset.department_id || ''}\r\n                onChange={handleChange}\r\n                disabled={!isEditing}\r\n              >\r\n                {departments.map(dept => (\r\n                  <MenuItem key={dept.id} value={dept.id}>\r\n                    {dept.name}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n              {editErrors.department_id && <FormHelperText>{editErrors.department_id}</FormHelperText>}\r\n            </FormControl>\r\n            <TextField\r\n              label=\"Помещение\"\r\n              name=\"room\"\r\n              value={asset.room || ''}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              disabled={!isEditing}\r\n            />\r\n            <TextField\r\n              label=\"Дата покупки *\"\r\n              name=\"purchase_date\"\r\n              type=\"date\"\r\n              value={asset.purchase_date || ''}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              error={!!editErrors.purchase_date}\r\n              helperText={editErrors.purchase_date}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              disabled={!isEditing}\r\n            />\r\n            <TextField\r\n              label=\"Комментарий\"\r\n              name=\"comments\"\r\n              value={asset.comments || ''}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              multiline\r\n              rows={4}\r\n              margin=\"normal\"\r\n              disabled={!isEditing}\r\n            />\r\n          </Grid>\r\n\r\n          {/* <<<--- НОВЫЙ БЛОК: Динамические поля, полученные из type_properties */}\r\n          {/* Предполагается, что они рендерятся после основных полей */}\r\n          {/* Если они должны быть в определенных местах, логику нужно адаптировать */}\r\n          {/* Здесь они добавлены в конец формы для примера */}\r\n          {typeProperties.map((property) => (\r\n            <Grid item xs={12} key={property.id}>\r\n              {renderDynamicField(property)}\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n\r\n        {/* Кнопки действий при редактировании */}\r\n        {isEditing && (\r\n          <Box display=\"flex\" justifyContent=\"flex-end\" mt={2}>\r\n            <Button onClick={handleCancel} style={{ marginRight: '10px' }}>\r\n              Отмена\r\n            </Button>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={handleSave}>\r\n              Сохранить\r\n            </Button>\r\n          </Box>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* Блок с QR-кодом */}\r\n      <Paper elevation={3} style={{ padding: '20px', marginTop: '20px' }}>\r\n        <Typography variant=\"h6\" gutterBottom>\r\n          QR-код актива\r\n        </Typography>\r\n        {qrCodeUrl ? (\r\n          <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\r\n            <img\r\n              src={qrCodeUrl}\r\n              alt={`QR-код для актива ${asset.inventory_number}`}\r\n              style={{ maxWidth: '200px', height: 'auto', marginBottom: '10px' }}\r\n            />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                const printWindow = window.open(qrCodeUrl, '_blank');\r\n                printWindow.onload = () => {\r\n                  printWindow.print();\r\n                };\r\n              }}\r\n            >\r\n              Печать QR-кода\r\n            </Button>\r\n          </Box>\r\n        ) : (\r\n          <Typography>Загрузка QR-кода...</Typography>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* Диалог подтверждения удаления */}\r\n      <Dialog\r\n        open={openDeleteDialog}\r\n        onClose={handleCloseDeleteDialog}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{\"Подтвердите удаление\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Вы уверены, что хотите удалить актив \"{asset.inventory_number}\"?\r\n            Это действие нельзя отменить.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDeleteDialog} color=\"primary\">\r\n            Отмена\r\n          </Button>\r\n          <Button onClick={handleDelete} color=\"error\" autoFocus>\r\n            Удалить\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AssetDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}